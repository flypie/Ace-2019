Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    1


c:\users\john bradley\dropbox\ace-2019\newrom\all.s

Location Object              Type  Line Source
                             A        1     INCLUDE "Ace3NOKB.asm"
                             B        1 ; Disassembly of the file "C:\ACE\JupiterAce.rom"
                             B        2 ;
                             B        3 ; CPU Type: Z80
                             B        4 ;
                             B        5 ; Created with dZ80 1.50
                             B        6 ;
                             B        7 ; on Monday, 21 of January 2002 at 07:11 PM
                             B        8 ; last updated 02-NOV-2002
                             B        9 ;
                             B       10 ; Cross-assembles to an 16K ROM file.
                             B       11 ;
                             B       12 ; Note. A Low-level Assembly Listing only.
                             B       13 
                             B       14 	INCLUDE "iodefs.inc"
                             C        1 ;	CPU  Z80
                             C        2 
                             C        3 	.IFNDEF RAMSTARTLOC
                             C        4 
                             C        5 	.DEFINE ROM
                             C        6 	.SECTION ROM
                             C        7 	
                             C        8 
                             C        9 ;RAMSTARTLOC equ 03C00h
                   00004000  C       10 RAMSTARTLOC equ 04000h
                             C       11 
                   00001E00  C       12 INTTABLEBASE	equ	01E00h
                             C       13 
                             C       14 
                   000000FC  C       15 KIOBASE	equ	0FCh
                             C       16 
                   00000000  C       17 PIOIOBASE	equ	00B
                   00000001  C       18 CTCIOBASE	equ	01B
                   00000002  C       19 SIOIOBASE	equ	10B
                   00000003  C       20 PIAIOBASE	equ	11B
                   00000003  C       21 KIOIOBASE	equ	11B
                             C       22 
                   00000000  C       23 PIOPORTADATA	equ	00b
                   00000001  C       24 PIOPORTACMD		equ	01b
                   00000000  C       25 PIOPORTBDATA	equ	00b
                   00000001  C       26 PIOPORTBCMD		equ	01b
                             C       27 
                   00000000  C       28 CTCCHANNEL0		equ	00b
                   00000001  C       29 CTCCHANNEL1		equ	01b
                   00000002  C       30 CTCCHANNEL2		equ	10b
                   00000003  C       31 CTCCHANNEL3		equ	11b
                             C       32 
                   00000000  C       33 SIOPORTADATA	equ	00b
                   00000001  C       34 SIOPORTACMD		equ	01b
                   00000000  C       35 SIOPORTBDATA	equ	00b
                   00000001  C       36 SIOPORTBCMD		equ	01b
                             C       37 
                   00000000  C       38 PIAPORTCDATA	equ	00b
                   00000001  C       39 PIAPORTCCMD		equ	01b
                             C       40 
                   00000002  C       41 KIOCOMMANDA		equ	10b
                   00000003  C       42 KIOCOMMANDB		equ	11b
                             C       43 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    2


iodefs.inc

Location Object              Type  Line Source
                             C       44 MAKEPORT	MACRO	Name,Base,Device,Register
                             C       45 Name equ Base|(Device<<8)|(Register<<10)
                             C       46 	ENDMAC 
                             C       47 
                             C       48 
                             C       49 	MAKEPORT PIOADATA,KIOBASE,PIOIOBASE,PIOPORTADATA
                   000000FC  C+      49 Name equ Base|(Device<<8)|(Register<<10)
                             C       50 	MAKEPORT PIOACMD,KIOBASE,PIOIOBASE,PIOPORTACMD
                   000004FC  C+      50 Name equ Base|(Device<<8)|(Register<<10)
                             C       51 	MAKEPORT PIOBDATA,KIOBASE,PIOIOBASE,PIOPORTBDATA
                   000000FC  C+      51 Name equ Base|(Device<<8)|(Register<<10)
                             C       52 	MAKEPORT PIOBCMD,KIOBASE,PIOIOBASE,PIOPORTBCMD
                   000004FC  C+      52 Name equ Base|(Device<<8)|(Register<<10)
                             C       53 
                             C       54 	MAKEPORT CTCCH0,KIOBASE,CTCIOBASE,CTCCHANNEL0
                   000001FC  C+      54 Name equ Base|(Device<<8)|(Register<<10)
                             C       55 	MAKEPORT CTCCH1,KIOBASE,CTCIOBASE,CTCCHANNEL1
                   000005FC  C+      55 Name equ Base|(Device<<8)|(Register<<10)
                             C       56 	MAKEPORT CTCCH2,KIOBASE,CTCIOBASE,CTCCHANNEL2
                   000009FC  C+      56 Name equ Base|(Device<<8)|(Register<<10)
                             C       57 	MAKEPORT CTCCH3,KIOBASE,CTCIOBASE,CTCCHANNEL3
                   00000DFC  C+      57 Name equ Base|(Device<<8)|(Register<<10)
                             C       58 
                             C       59 	MAKEPORT SIOADATA,KIOBASE,SIOIOBASE,SIOPORTADATA
                   000002FC  C+      59 Name equ Base|(Device<<8)|(Register<<10)
                             C       60 	MAKEPORT SIOACMD,KIOBASE,SIOIOBASE,SIOPORTACMD
                   000006FC  C+      60 Name equ Base|(Device<<8)|(Register<<10)
                             C       61 	MAKEPORT SIOBDATA,KIOBASE,SIOIOBASE,SIOPORTBDATA
                   000002FC  C+      61 Name equ Base|(Device<<8)|(Register<<10)
                             C       62 	MAKEPORT SIOBCMD,KIOBASE,SIOIOBASE,SIOPORTBCMD
                   000006FC  C+      62 Name equ Base|(Device<<8)|(Register<<10)
                             C       63 
                             C       64 	MAKEPORT PIOCDATA,KIOBASE,PIAIOBASE,PIAPORTCDATA
                   000003FC  C+      64 Name equ Base|(Device<<8)|(Register<<10)
                             C       65 	MAKEPORT PIOCCMD,KIOBASE,PIAIOBASE,PIAPORTCCMD
                   000007FC  C+      65 Name equ Base|(Device<<8)|(Register<<10)
                             C       66 
                             C       67 	MAKEPORT KIOCMDA,KIOBASE,KIOIOBASE,KIOCOMMANDA
                   00000BFC  C+      67 Name equ Base|(Device<<8)|(Register<<10)
                             C       68 	MAKEPORT KIOCMDB,KIOBASE,KIOIOBASE,KIOCOMMANDB
                   00000FFC  C+      68 Name equ Base|(Device<<8)|(Register<<10)
                             C       69 
                             C       70 	
                   000000F0  C       71 WDTMT	equ	0F0h
                   000000F1  C       72 WDTCR	equ	0F1h
                             C       73 
                   000000F4  C       74 IPR		equ	0F4h
                             C       75 
                   000000EE  C       76 SCRP	equ	0EEh
                   000000EF  C       77 SCDP	equ	0EFh
                             C       78 
                   00000020  C       79 SERIALTXBUFFLEN	equ	020h	;must be power of 2
                             C       80 
                             C       81 DEFB MACRO P1
                             C       82 	DB P1
                             C       83 	ENDMAC
                             C       84 
                             C       85 DEFW MACRO P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    3


iodefs.inc

Location Object              Type  Line Source
                             C       86 	DW P1
                             C       87 	ENDMAC
                             C       88 
                             C       89 DEFM MACRO P1
                             C       90 	DB P1
                             C       91 	ENDMAC
                             C       92 
                             C       93 
                             C       94 	.endif
                             B       15 
                             B       16 	CPU = Z180
                             B       17 
                             B       18 	ORG	0000H
                             B       19 
                             B       20 
                             B       21 	PUBLIC	IM1INTHANDLER
                             B       22 
                             B       23 ; -------------------
                             B       24 ; THE 'START' RESTART
                             B       25 ; -------------------
                             B       26 
00000000                     B       27 L0000:
00000000 F3                  B       28 	DI								; disable interrupts.
00000001 21 00 40            B       29 	LD		HL,RAMSTART				; start of 'User' RAM
00000004 3E FC               B       30 	LD		A,0FCh					; a test byte and 1K masking byte.
00000006 18 20               B       31 	JR		L0028					; forward to continue at Part 2. //ontobus
                             B       32 ;	JP		NEWROMSTART
                             B       33 
                             B       34 ; -------------------
                             B       35 ; THE 'PRINT' RESTART
                             B       36 ; -------------------
                             B       37 
                             B       38 	ORG	0008H
00000008 D9                  B       39 L0008:  EXX								; preserve main registers.
00000009 DD CB 3E 5E         B       40 	BIT		3,(IX+03Eh)				; test FLAGS for print destination.
                             B       41 ;	JP		L03EE					; forward to
0000000D C3 88 01            B       42 	JP		ErrorOut
                             B       43 ; ---------------------------
                             B       44 ; THE 'STACK WORD DE' RESTART
                             B       45 ; ---------------------------
                             B       46 
                             B       47 	ORG	0010H
00000010 2A 3B 40            B       48 L0010:  LD		HL,(SPARE)				; SPARE
00000013 73                  B       49 	LD		(HL),E
00000014 23                  B       50 	INC		HL
                             B       51 ;	JP		L085F					;
00000015 C3 88 01            B       52 	JP		ErrorOut
                             B       53 
                             B       54 ; -------------------------
                             B       55 ; THE 'POP WORD DE' RESTART
                             B       56 ; -------------------------
                             B       57 
                             B       58 
                             B       59 	ORG	0018H
00000018 2A 3B 40            B       60 L0018:  LD		HL,(SPARE)				; SPARE
0000001B 2B                  B       61 	DEC		HL
0000001C 56                  B       62 	LD		D,(HL)
                             B       63 ;	JP		L0859					;
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    4


Ace3NOKB.asm

Location Object              Type  Line Source
0000001D C3 88 01            B       64 	JP		ErrorOut
                             B       65 
                             B       66 ; -------------------
                             B       67 ; THE 'ERROR' RESTART
                             B       68 ; -------------------
                             B       69 	ORG	0020H
00000020 E1                  B       70 L0020:  POP		HL
00000021 7E                  B       71 	LD		A,(HL)
00000022 32 3D 40            B       72 	LD		(ERR_NO),A				; ERR_NO
                             B       73 ;	JP		L00AD					;
00000025 C3 88 01            B       74 	JP		ErrorOut
                             B       75 
                             B       76 ; ------------------------------------
                             B       77 ; THE 'INITIALIZATION ROUTINE' Part 2.
                             B       78 ; ------------------------------------
                             B       79 
00000028 24                  B       80 L0028:  INC		H						; increase high byte
00000029 77                  B       81 	LD		(HL),A					; insert A value
0000002A BE                  B       82 	CP		(HL)					; compare to expected
0000002B 28 FB               B       83 	JR		Z,L0028					; loop back while RAM is populated.
                             B       84 
0000002D A4                  B       85 	AND		H						; limit to nearest 1K segment.
0000002E 67                  B       86 	LD		H,A						; place back in H.
                             B       87 ;		LD		(RAMSTART+018h),HL				; set system variable RAMTOP.
0000002F 22 18 40            B       88 	LD		(RAMTOP),HL					; set system variable RAMTOP.
00000032 F9                  B       89 	LD		SP,HL					; initialize the stack pointer.
                             B       90 
                             B       91 ; the Z80 instructions CALL, PUSH and POP can now be used.
                             B       92 
00000033 21 BB 00            B       93 	LD		HL,L010D				; prepare to copy the system variables
                             B       94 					; initial state from ROM.
00000036 18 31               B       95 	JR		L003B					; skip past the fixed-position restart.
                             B       96 
                             B       97 ; -----------------------
                             B       98 ; THE 'INTERRUPT' RESTART
                             B       99 ; -----------------------
                             B      100 
                             B      101 	ORG	00038H
                             B      102 ;L0038:  JP		IM1INTHANDLER					; jump to somewhere more convenient.
00000038 C3 88 01            B      103 	JP		ErrorOut
                             B      104 ;	retn
                             B      105 
                             B      106 ; -----------------------
                             B      107 ; THE 'INTERRUPT' RESTART
                             B      108 ; -----------------------
                             B      109 	ORG	00066H
00000066 C3 88 01            B      110 	JP		ErrorOut
                             B      111 
                             B      112 ;------------------------------------------------------------------------------
                             B      113 ;
                             B      114 ; MEMORY MAP
                             B      115 ;
                             B      116 ; 00000h +======================================================+
                             B      117 ;		|														|
                             B      118 ;		|					ROM 8K								|
                             B      119 ;		|										v 02300h			|
                             B      120 ; 02000h +======================================================+ - - - - - -
                             B      121 ;		|		copy of 02400h					|0|<  cassette  >|
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    5


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      122 ; 02400h +-------------------------------------+-+--------------+
                             B      123 ;		|		VIDEO MEMORY 768 bytes		|0| PAD 254 bytes| 1K RAM
                             B      124 ; 02800h +-------------------------------------+-+--------------+
                             B      125 ;		|		copy of 02c00h					^ 02700h			|
                             B      126 ; 02C00h +------------------------------------------------------+
                             B      127 ;		|		CHARACTER SET - Write-Only						| 1K RAM
                             B      128 ; 03000h +------------------------------------------------------+
                             B      129 ;		|		ROM 4K										|
                             B      130 ; 04000h +-------+----------------------------------------------+
                             B      131 ;		|SYSVARS| DICT {12} DATA STACK ->			<- RET STACK | 1K RAM
                             B      132 ;		+=======+==============================================+
                             B      133 ;		|														|
                             B      134 ;						48K AVAILABLE FOR EXPANSION.
                             B      135 ;		|														|
                             B      136 ; 0FFFFh +======================================================+
                             B      137 ;
                             B      138 ; The Ace had an 8K ROM and was sold with 3K of RAM each byte of which had
                             B      139 ; at least two addresses and sometimes four addresses so the mapping of the
                             B      140 ; 3K of RAM was as above.
                             B      141 ; The 768 bytes of video memory is accessed by the ROM using addresses
                             B      142 ; 02400h - 026FFh. This gives priority to the video circuitry which also needs
                             B      143 ; this information to build the TV picture. The byte at 02700h is set to zero
                             B      144 ; so that it is easy for the ROM to detect when it is at the end of the screen.
                             B      145 ; The 254 bytes remaining are the PAD - the workspace used by FORTH.
                             B      146 ; This same area is used by the tape recorder routines to assemble the tape
                             B      147 ; header information but since, for accurate tape timing, the FORTH ROM needs
                             B      148 ; priority over the video circuitry, then the ROM uses addresses 02301h - 023FFh.
                             B      149 ;
                             B      150 ; Similarly the Character Set is written to by the ROM (and User) at the 1K
                             B      151 ; section starting at 02C00h. The video circuitry accesses this using addresses
                             B      152 ; 02800h - 02BFFh to build the TV picture. It is not possible for the ROM or User
                             B      153 ; to read back the information from either address so this precludes the saving
                             B      154 ; of character sets and writing a driver for a device like the ZX Printer.
                             B      155 ;
                             B      156 ;
                             B      157 ; Then comes the User Dictionary, the first word of which is "FORTH" which links
                             B      158 ; to the Dictionary in ROM. Next a gap of 12 bytes to allow for Data Stack
                             B      159 ; underflow and then the Data Stack itself which grows upwards.
                             B      160 ; At the opposite end of free memory is the Return Stack (machine stack) which
                             B      161 ; grows downwards.
                             B      162 
                             B      163 ; ------------------------------------
                             B      164 ; THE 'INITIALIZATION ROUTINE' Part 3.
                             B      165 ; ------------------------------------
                             B      166 
00000069 11 24 40            B      167 L003B:  LD		DE,L_HALF				; destination system variable L_HALF
0000006C 01 2D 00            B      168 	LD		BC,0002Dh				; number of bytes.
0000006F ED B0               B      169 	LDIR							; copy initial state from ROM to RAM.
                             B      170 
00000071 DD 21 00 40         B      171 	LD		IX,FP_WS				; set IX to index the system variables.
                             B      172 ;;	LD		IY,L04C8				; set IY to the SLOW return address.
                             B      173 
00000075 CD 29 01            B      174 L004B:  CALL	L0A24					; routine CLS.
                             B      175 
00000078 AF                  B      176 	XOR		A						; clear accumulator.
                             B      177 
00000079 32 00 27            B      178 	LD		(02700h),A				; make location after screen zero.
                             B      179 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    6


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      180 ; There are 128 bit-mapped 8x8 characters.
                             B      181 ; Define the 8 Battenberg graphics (010h to 017h) from low byte of address.
                             B      182 ; This routine also sets the other characters 000h to 00Fh and 018h to 01Fh
                             B      183 ; to copies of this range. The inverse form of character 017h is used as the
                             B      184 ; normal cursor - character 097h.
                             B      185 
0000007C 21 00 2C            B      186 L0052:  LD		HL,02C00h				; point to the start of the 1K write-
                             B      187 					; only Character Set RAM.
                             B      188 
0000007F 7D                  B      189 L0055:  LD		A,L						; set A to low byte of address
00000080 E6 BF               B      190 	AND		0BFh						; AND %10111111
00000082 0F                  B      191 	RRCA							; rotate
00000083 0F                  B      192 	RRCA							; three times
00000084 0F                  B      193 	RRCA							; to test bit 2
00000085 30 02               B      194 	JR		NC,L005F				; forward if not set.
                             B      195 
00000087 0F                  B      196 	RRCA							; else rotate
00000088 0F                  B      197 	RRCA							; twice more.
                             B      198 
00000089 0F                  B      199 L005F:  RRCA							; set carry from bit (3) or (6)
                             B      200 
0000008A 47                  B      201 	LD		B,A
                             B      202 
0000008B 9F                  B      203 	SBC		A,A						; 000h or 0FFh
0000008C CB 18               B      204 	RR		B
0000008E 47                  B      205 	LD		B,A
0000008F 9F                  B      206 	SBC		A,A
00000090 A8                  B      207 	XOR		B
00000091 E6 F0               B      208 	AND		0F0h
00000093 A8                  B      209 	XOR		B
00000094 77                  B      210 	LD		(HL),A					; insert the byte.
00000095 2C                  B      211 	INC		L						; increment low byte of address
00000096 20 E7               B      212 	JR		NZ,L0055				; loop back until the first 256 bytes
                             B      213 					; have been filled with 32 repeating
                             B      214 					; characters.
                             B      215 
                             B      216 ; Now copy the bit patterns at the end of this ROM to the last 768 bytes of
                             B      217 ; the Character RAM, filling in some blank bytes omitted to save ROM space.
                             B      218 ; This process starts at high memory and works downwards.
                             B      219 
00000098 11 FF 2F            B      220 L006E:  LD		DE,02FFFh				; top of destination.
0000009B 21 94 04            B      221 	LD		HL,L1FFB				; end of copyright character.
0000009E 01 08 00            B      222 	LD		BC,00008h				; 8 characters
                             B      223 
000000A1 ED B8               B      224 	LDDR							; copy the  ï¿½  character
                             B      225 
000000A3 EB                  B      226 	EX		DE,HL					; switch pointers.
                             B      227 
000000A4 3E 5F               B      228 	LD		A,05Fh					; set character counter to ninety five.
                             B      229 					; i.e. %0101 1111
                             B      230 					; bit 5 shows which 32-character sector
                             B      231 					; we are in.
                             B      232 
                             B      233 ; enter a loop for the remaining characters supplying zero bytes as required.
                             B      234 
000000A6 0E 07               B      235 L007C:  LD		C,007h					; set byte counter to seven.
                             B      236 
000000A8 CB 6F               B      237 	BIT		5,A						; test bit 5 of the counter.
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    7


Ace3NOKB.asm

Location Object              Type  Line Source
000000AA 28 03               B      238 	JR		Z,L0085					; forward if not in middle section
                             B      239 					; which includes "[A-Z]"
                             B      240 
000000AC 70                  B      241 	LD		(HL),B					; else insert a zero byte.
000000AD 2B                  B      242 	DEC		HL						; decrement the destination address.
000000AE 0D                  B      243 	DEC		C						; and the byte counter.
                             B      244 
000000AF EB                  B      245 L0085:  EX		DE,HL					; switch pointers.
                             B      246 
000000B0 ED B8               B      247 	LDDR							; copy the 5 or 6 characters.
                             B      248 
000000B2 EB                  B      249 	EX		DE,HL					; switch pointers.
                             B      250 
000000B3 70                  B      251 	LD		(HL),B					; always insert the blank top byte.
000000B4 2B                  B      252 	DEC		HL						; decrement the address.
                             B      253 
000000B5 3D                  B      254 	DEC		A						; decrement the character counter.
                             B      255 
000000B6 20 EE               B      256 	JR		NZ,L007C				; back for all 95 characters.
                             B      257 
                             B      258 ;	IM		1						; Select Interrupt Mode 1
                             B      259 ;	JR		L009B					; and then jump into the code for the
                             B      260 
                             B      261 ;	.EXTERN	NEWROMSTART
000000B8 C3 08 05            B      262 	JP	NEWROMSTART
                             B      263 					; QUIT word.
                             B      264 
                             B      265 
                             B      266 ; -------------------------
                             B      267 ; THE 'DEFAULT ENVIRONMENT'
                             B      268 ; -------------------------
                             B      269 ; This is the default environment that is copied from ROM to RAM as part of
                             B      270 ; the initialization process. This also contains the FORTH word FORTH definition
                             B      271 
                             B      272 L010D:  DEFW	026E0h					; L_HALF
000000BB E0 26               B+     272 	DW P1
                             B      273 
                             B      274 	DEFB	000h						; KEYCOD
000000BD 00                  B+     274 	DB P1
                             B      275 	DEFB	000h						; KEYCNT copy the 32 bytes.
000000BE 00                  B+     275 	DB P1
                             B      276 	DEFB	000h						; STATIN
000000BF 00                  B+     276 	DB P1
                             B      277 	DEFW	00000h					; EXWRCH
000000C0 00 00               B+     277 	DW P1
                             B      278 	DEFB	000h						; FRAMES
000000C2 00                  B+     278 	DB P1
                             B      279 	DEFB	000h						; FRAMES
000000C3 00                  B+     279 	DB P1
                             B      280 	DEFB	000h						; FRAMES
000000C4 00                  B+     280 	DB P1
                             B      281 	DEFB	000h						; FRAMES
000000C5 00                  B+     281 	DB P1
                             B      282 	DEFB	000h						; XCOORD
000000C6 00                  B+     282 	DB P1
                             B      283 	DEFB	000h						; YCOORD
000000C7 00                  B+     283 	DB P1
                             B      284 	DEFW	RAMSTART+04Ch					; CURRENT
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    8


Ace3NOKB.asm

Location Object              Type  Line Source
000000C8 4C 40               B+     284 	DW P1
                             B      285 	DEFW	RAMSTART+04Ch					; CONTEXT
000000CA 4C 40               B+     285 	DW P1
                             B      286 	DEFW	RAMSTART+04Fh					; VOCLNK
000000CC 4F 40               B+     286 	DW P1
                             B      287 	DEFW	RAMSTART+051h					; STKBOT
000000CE 51 40               B+     287 	DW P1
                             B      288 	DEFW	RAMSTART+045h					; DICT
000000D0 45 40               B+     288 	DW P1
                             B      289 	DEFW	RAMSTART+05Dh					; SPARE
000000D2 5D 40               B+     289 	DW P1
                             B      290 	DEFB	0FFh						; ERR_NO
000000D4 FF                  B+     290 	DB P1
                             B      291 	DEFB	000h						; FLAGS
000000D5 00                  B+     291 	DB P1
                             B      292 	DEFB	00Ah						; BASE
000000D6 0A                  B+     292 	DB P1
                             B      293 
                             B      294 ; FORTH
                             B      295 
                             B      296 	DEFM	"FORT"					; The 'name field'
000000D7 46 4F 52 54         B+     296 	DB P1
                             B      297 	DEFB	'H'+080h				; FORTH
000000DB C8                  B+     297 	DB P1
                             B      298 
                             B      299 
                             B      300 	DEFW	00000h					; length field - filled when next word
000000DC 00 00               B+     300 	DW P1
                             B      301 					; is defined.
                             B      302 	DEFW	L1FFF					; link field copied to RAMSTART+049h.
000000DE 96 04               B+     302 	DW P1
                             B      303 	DEFB	005h					; name length field
000000E0 05                  B+     303 	DB P1
                             B      304 ;;	DEFW	L11B5					; code field
                             B      305 	DEFW	0
000000E1 00 00               B+     305 	DW P1
                             B      306 	DEFW	RAMSTART+049h			; address of parameters
000000E3 49 40               B+     306 	DW P1
                             B      307 	DEFB	000h					; VOCLNK						[RAMSTART+04Fh]
000000E5 00                  B+     307 	DB P1
                             B      308 	DEFB	000h					; - link to next vocabulary.
000000E6 00                  B+     308 	DB P1
                             B      309 	DEFB	000h					; last byte to be copied.	to [RAMSTART+051h]
000000E7 00                  B+     309 	DB P1
                             B      310 
                             B      311 ; -----------------------------------------------
                             B      312 ; THE 'CONTINUATION OF THE Z80 INTERRUPT' ROUTINE
                             B      313 ; -----------------------------------------------
                             B      314 ; The destination of the jump at 00038h.
                             B      315 ; Begin by saving both accumulators and the 3 main registers.
                             B      316 
000000E8                     B      317 IM1INTHANDLER:
000000E8 F5                  B      318 	PUSH	AF						; preserve both accumulators
000000E9 08                  B      319 	EX		AF,AF'					;
000000EA F5                  B      320 	PUSH	AF						;
                             B      321 
000000EB C5                  B      322 	PUSH	BC						; and main registers.
000000EC D5                  B      323 	PUSH	DE						;
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:    9


Ace3NOKB.asm

Location Object              Type  Line Source
000000ED E5                  B      324 	PUSH	HL						;
                             B      325 
                             B      326 ; Now wait for 62 * 12 clock cycles. ( To avoid flicker perhaps? ).
                             B      327 
000000EE 06 3E               B      328 	LD		B,03Eh					; delay counter.
                             B      329 
000000F0 10 FE               B      330 L0142:  DJNZ	L0142					; self loop for delay
                             B      331 
                             B      332 ; Increment the 4-byte frames counter for use as a system clock.
                             B      333 
000000F2 21 2B 40            B      334 	LD		HL,FRAMES				; FRAMES1
                             B      335 
000000F5                     B      336 L0147:
000000F5 34                  B      337 	INC		(HL)					; increment timer.
000000F6 23                  B      338 	INC		HL						; next significant byte of four.
000000F7 28 FC               B      339 	JR		Z,L0147					; loop back if the value wrapped back
                             B      340 					; to zero.
                             B      341 
                             B      342 ; Note. as manual points out, there is no actual check on this and if
                             B      343 ; you leave your Ace switched on for 2.75 years it will advance to the
                             B      344 ; following system variables although it takes several millennia to advance
                             B      345 ; through the screen coordinates.
                             B      346 
                             B      347 ; Now read the keyboard and if no new key then exit after restoring the
                             B      348 ; preserved registers.
                             B      349 
                             B      350 ;	CALL	L0310					; routine KEYBOARD.
                             B      351 
000000F9 21 28 40            B      352 	LD		HL,STATIN				; address system variable STATIN
                             B      353 
000000FC CB 46               B      354 	BIT		0,(HL)					; new key?
000000FE 28 15               B      355 	JR		Z,L0176					; forward if not to RESTORE/EXIT
                             B      356 
00000100 A7                  B      357 	AND		A						; zero key code ?
00000101 28 12               B      358 	JR		Z,L0176					; forward if so to EXIT.
                             B      359 
00000103 FE 20               B      360 	CP		020h						; compare to SPACE
00000105 38 0E               B      361 	JR		C,L0170					; forward if less as an Editing Key.
                             B      362 
00000107 CB 4E               B      363 	BIT		1,(HL)					; CAPS shift?
                             B      364 ;	CALL	NZ,L0807				; routine TO_UPPER
                             B      365 
00000109 CB 56               B      366 	BIT		2,(HL)					; GRAPHICS mode?
0000010B 28 02               B      367 	JR		Z,L0167					; skip forward if not
                             B      368 
0000010D E6 9F               B      369 	AND		09Fh						; convert to one of 8 mosaic characters
                             B      370 
0000010F CB 5E               B      371 L0167:  BIT		3,(HL)					; INVERSE mode?
00000111 28 02               B      372 	JR		Z,L016D					; forward if not.
                             B      373 
00000113 F6 80               B      374 	OR		080h						; set bit 7 to make character inverse.
                             B      375 
00000115                     B      376 L016D:
                             B      377 ;	CALL	L0196					; routine pr_buffer
                             B      378 
00000115                     B      379 L0170:
                             B      380 ;	CALL	L01E6					; routine EDIT_KEY
                             B      381 ;	CALL	L0282					; routine pr_cursor
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   10


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      382 
                             B      383 ; Before exiting restore the preserved registers.
                             B      384 
00000115 E1                  B      385 L0176:  POP		HL						;
00000116 D1                  B      386 	POP		DE						;
00000117 C1                  B      387 	POP		BC						;
00000118 F1                  B      388 	POP		AF						;
00000119 08                  B      389 	EX		AF,AF'					;
0000011A F1                  B      390 	POP		AF						;
                             B      391 
0000011B FB                  B      392 	EI								; Enable Interrupts
                             B      393 
0000011C C9                  B      394 	RET								; return.
                             B      395 
                             B      396 
                             B      397 ; ------------------------
                             B      398 ; The 'SPACE FILL' routine
                             B      399 ; ------------------------
                             B      400 ; -> from cls
                             B      401 
0000011D A7                  B      402 L07FA:  AND		A						; prepare to subtract two screen
                             B      403 					; pointers.
                             B      404 
0000011E ED 52               B      405 L07FB:  SBC		HL,DE					; number of bytes in HL.
00000120 EB                  B      406 	EX		DE,HL					; now in DE, HL = start of area.
                             B      407 
00000121 7A                  B      408 L07FE:  LD		A,D						; check if the
00000122 B3                  B      409 	OR		E						; counter is zero.
00000123 C8                  B      410 	RET		Z						; return if so.					>>
                             B      411 
                             B      412 ;	LD		(HL),020h				; insert a space character.
00000124 75                  B      413 	LD		(HL),L				; insert a space character. //Ontobus
                             B      414 
00000125 23                  B      415 	INC		HL						; next address.
00000126 1B                  B      416 	DEC		DE						; decrement byte counter.
00000127 18 F8               B      417 	JR		L07FE					; loop back to exit on zero.
                             B      418 
                             B      419 
                             B      420 ; --------------------
                             B      421 ; THE 'CLS' SUBROUTINE
                             B      422 ; --------------------
                             B      423 ; Called from the 'CLS' word definition above and also from the initialization
                             B      424 ; routine.
                             B      425 
00000129                     B      426 L0A24:  
00000129 11 FF 26            B      427 	LD		DE,026FFh				; point destination to end of video
                             B      428 					; memory.
0000012C 2A 24 40            B      429 	LD		HL,(L_HALF)				; set HL to first byte of input buffer
                             B      430 					; from system variable L_HALF.
                             B      431 					; (at initialization 026E0h).
                             B      432 
0000012F 01 20 00            B      433 	LD		BC,00020h				; set count to thirty two.
                             B      434 
00000132 09                  B      435 	ADD		HL,BC					; add to the low address.
00000133 2B                  B      436 	DEC		HL						; step back and
00000134 ED B8               B      437 	LDDR							; copy the 32 bytes.
                             B      438 
                             B      439 ; while BC is zero, set the plotting coordinates.
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   11


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      440 
00000136 ED 43 2F 40         B      441 	LD		(XCOORD),BC				; set XCOORD and YCOORD to zero.
                             B      442 
                             B      443 ; set the screen position to the start of video memory.
                             B      444 
0000013A 21 00 24            B      445 	LD		HL,02400h				; start of the 768 bytes of video RAM.
0000013D 22 1C 40            B      446 	LD		(SCRPOS),HL				; set system variable SCRPOS.
                             B      447 
00000140 13                  B      448 	INC		DE						; the byte before logical line.
00000141 EB                  B      449 	EX		DE,HL					; transfer to HL.
00000142 22 24 40            B      450 	LD		(L_HALF),HL				; set L_HALF.
00000145 C3 1D 01            B      451 	JP		L07FA					; jump back to fill the locations
                             B      452 									; from DE to HL -1 with spaces.
                             B      453 
                             B      454 
                             B      455 
                             B      456 ;----------------------------------------------------------------------------
                             B      457 ;							LOGICAL VIEW OF KEYBOARD
                             B      458 ;
                             B      459 ;			0		1		2		3		4 -Bits-  4		3		2		1		0
                             B      460 ; PORT																	PORT
                             B      461 ;
                             B      462 ; F7FE  [ 1 ] [ 2 ] [ 3 ] [ 4 ] [ 5 ]  |  [ 6 ] [ 7 ] [ 8 ] [ 9 ] [ 0 ]   EFFE
                             B      463 ;  ^									|									v
                             B      464 ; FBFE  [ Q ] [ W ] [ E ] [ R ] [ T ]  |  [ Y ] [ U ] [ I ] [ O ] [ P ]   DFFE
                             B      465 ;  ^									|									v
                             B      466 ; FDFE  [ A ] [ S ] [ D ] [ F ] [ G ]  |  [ H ] [ J ] [ K ] [ L ] [ ENT ] BFFE
                             B      467 ;  ^									|									v
                             B      468 ; FEFE  [SHI] [SYM] [ Z ] [ X ] [ C ]  |  [ V ] [ B ] [ N ] [ M ] [ SPC ] 7FFE
                             B      469 ;  ^			v												^			v
                             B      470 ; Start			+------------>--------------------->-------------+		End
                             B      471 ;
                             B      472 ;
                             B      473 ;----------------------------------------------------------------------------
                             B      474 
                             B      475 
                             B      476 ; ----------------------------------
                             B      477 ; THE 'KEYBOARD SCANNING' SUBROUTINE
                             B      478 ; ----------------------------------
                             B      479 ; This routine is called by the KEYBOARD routine 50 times a second and
                             B      480 ; by the ACE FORTH 'INKEY' WORD.
                             B      481 ; The above diagram shows the logical view of the Keyboard and PORTS.
                             B      482 ; The physical view is similar except that the symbol shift key is to the
                             B      483 ; left of the space key.
                             B      484 
                             B      485 
00000148 01 FE FE            B      486 L0336:  LD		BC,0FEFEh				; port address - B is also an 8 counter
                             B      487 
0000014B ED 50               B      488 	IN		D,(C)					; read from port to D.
                             B      489 					; when a key is pressed, the
                             B      490 					; corresponding bit is reset.
                             B      491 
0000014D 5A                  B      492 	LD		E,D						; save in E
                             B      493 
0000014E CB 3A               B      494 	SRL		D						; read the outer SHIFT key.
                             B      495 
00000150 9F                  B      496 	SBC		A,A						; 000h if SHIFT else 0FFh.
00000151 E6 D8               B      497 	AND		0D8h						; 000h if SHIFT else 0D8h.
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   12


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      498 
00000153 CB 3A               B      499 	SRL		D						; read the symbol shift bit
00000155 38 02               B      500 	JR		C,L0347					; skip if not pressed.
                             B      501 
00000157 3E 28               B      502 	LD		A,028h					; load A with 40 decimal.
                             B      503 
00000159 C6 57               B      504 L0347:  ADD		A,057h					; gives 07Fh SYM, 057h SHIFT, or 02Fh
                             B      505 
                             B      506 ; Since 8 will be subtracted from the initial key value there are three
                             B      507 ; distinct ranges 0 - 39, 40 - 79, 80 - 119.
                             B      508 
0000015B 6F                  B      509 	LD		L,A						; save key range value in L
0000015C 7B                  B      510 	LD		A,E						; fetch the original port reading.
0000015D F6 03               B      511 	OR		003h						; cancel the two shift bits.
                             B      512 
0000015F 1E FF               B      513 	LD		E,0FFh					; set a flag to detect multiple keys.
                             B      514 
                             B      515 ; KEY_LINE the half-row loop.
                             B      516 
00000161 2F                  B      517 L034F:  CPL								; complement bits
                             B      518 
00000162 E6 1F               B      519 	AND		01Fh						; mask off the rightmost five key bits.
00000164 57                  B      520 	LD		D,A						; save a copy in D.
00000165 28 0D               B      521 	JR		Z,L0362					; forward if no keys pressed to do the
                             B      522 					; next row.
                             B      523 
00000167 7D                  B      524 	LD		A,L						; else fetch the key value
00000168 1C                  B      525 	INC		E						; test E for 0FFh
00000169 20 12               B      526 	JR		NZ,L036B				; forward if not now zero to quit
                             B      527 
0000016B D6 08               B      528 L0359:  SUB		008h						; subtract 8 from key value
                             B      529 
0000016D CB 3A               B      530 	SRL		D						; test next bit affecting zero and carry
                             B      531 
0000016F 30 FA               B      532 	JR		NC,L0359				; loop back until the set bit is found.
                             B      533 
00000171 5F                  B      534 	LD		E,A						; transfer key value to E.
00000172 20 09               B      535 	JR		NZ,L036B				; forward to abort if more than one key
                             B      536 					; is pressed in the row.
                             B      537 
00000174 2D                  B      538 L0362:  DEC		L						; decrement the key value for next row.
                             B      539 
00000175 CB 00               B      540 	RLC		B						; rotate the 8 counter and port address
                             B      541 
00000177 30 06               B      542 	JR		NC,L036D				; skip forward when all 8 rows have
                             B      543 					; been read.
                             B      544 
00000179 ED 78               B      545 	IN		A,(C)					; else read the next half-row.
0000017B 18 E4               B      546 	JR		L034F					; and back to KEY_LINE.
                             B      547 
                             B      548 ; ---
                             B      549 ; ABORTKEY
                             B      550 
0000017D 1E FF               B      551 L036B:  LD		E,0FFh					; signal invalid key.
                             B      552 
                             B      553 ; the normal exit checks if E holds a key and not 0FFh.
                             B      554 
0000017F 7B                  B      555 L036D:  LD		A,E						; fetch possible key value.
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   13


Ace3NOKB.asm

Location Object              Type  Line Source
00000180 3C                  B      556 	INC		A						; increment
00000181 C8                  B      557 	RET		Z						; return if was 0FFh as original.
                             B      558 
00000182 21 9C 01            B      559 	LD		HL,L0376				; else address KEY TABLE
00000185 19                  B      560 	ADD		HL,DE					; index into table.
                             B      561 					; (D is zero)
                             B      562 
00000186 7E                  B      563 	LD		A,(HL)					; pick up character.
                             B      564 
00000187 C9                  B      565 	RET								; return with translated character.
                             B      566 
                             B      567 
                             B      568 
                             B      569 ;Bollcs
00000188                     B      570 ErrorOut:
00000188 E5                  B      571 	push	HL
00000189 21 20 24            B      572 	LD		HL,02420h				; start of the 768 bytes of video RAM.
0000018C 36 45               B      573 	LD		(HL),'E'				; pick up character.
0000018E 2C                  B      574 	INC		L
0000018F 36 52               B      575 	LD		(HL),'R'				; pick up character.
00000191 2C                  B      576 	INC		L
00000192 36 52               B      577 	LD		(HL),'R'				; pick up character.
00000194 2C                  B      578 	INC		L
00000195 36 4F               B      579 	LD		(HL),'O'				; pick up character.
00000197 2C                  B      580 	INC		L
00000198 36 52               B      581 	LD		(HL),'R'				; pick up character.
0000019A E1                  B      582 	pop		HL
0000019B C9                  B      583 	ret
                             B      584 
                             B      585 ; ---------------
                             B      586 ; THE 'KEY TABLE'
                             B      587 ; ---------------
                             B      588 
                             B      589 ; -----------------------
                             B      590 ; THE '40 UNSHIFTED KEYS'
                             B      591 ; -----------------------
                             B      592 
                             B      593 L0376:  DEFB	076h						; V - v
0000019C 76                  B+     593 	DB P1
                             B      594 	DEFB	068h						; H - h
0000019D 68                  B+     594 	DB P1
                             B      595 	DEFB	079h						; Y - y
0000019E 79                  B+     595 	DB P1
                             B      596 	DEFB	036h						; 6 - 6
0000019F 36                  B+     596 	DB P1
                             B      597 	DEFB	035h						; 5 - 5
000001A0 35                  B+     597 	DB P1
                             B      598 	DEFB	074h						; T - t
000001A1 74                  B+     598 	DB P1
                             B      599 	DEFB	067h						; G - g
000001A2 67                  B+     599 	DB P1
                             B      600 	DEFB	063h						; C - c
000001A3 63                  B+     600 	DB P1
                             B      601 	DEFB	062h						; B - b
000001A4 62                  B+     601 	DB P1
                             B      602 	DEFB	06Ah						; J - j
000001A5 6A                  B+     602 	DB P1
                             B      603 	DEFB	075h						; U - u
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   14


Ace3NOKB.asm

Location Object              Type  Line Source
000001A6 75                  B+     603 	DB P1
                             B      604 	DEFB	037h						; 7 - 7
000001A7 37                  B+     604 	DB P1
                             B      605 	DEFB	034h						; 4 - 4
000001A8 34                  B+     605 	DB P1
                             B      606 	DEFB	072h						; R - r
000001A9 72                  B+     606 	DB P1
                             B      607 	DEFB	066h						; F - f
000001AA 66                  B+     607 	DB P1
                             B      608 	DEFB	078h						; X - x
000001AB 78                  B+     608 	DB P1
                             B      609 	DEFB	06Eh						; N - n
000001AC 6E                  B+     609 	DB P1
                             B      610 	DEFB	06Bh						; K - k
000001AD 6B                  B+     610 	DB P1
                             B      611 	DEFB	069h						; I - i
000001AE 69                  B+     611 	DB P1
                             B      612 	DEFB	038h						; 8 - 8
000001AF 38                  B+     612 	DB P1
                             B      613 	DEFB	033h						; 3 - 3
000001B0 33                  B+     613 	DB P1
                             B      614 	DEFB	065h						; E - e
000001B1 65                  B+     614 	DB P1
                             B      615 	DEFB	064h						; D - d
000001B2 64                  B+     615 	DB P1
                             B      616 	DEFB	07Ah						; Z - z
000001B3 7A                  B+     616 	DB P1
                             B      617 	DEFB	06Dh						; M - m
000001B4 6D                  B+     617 	DB P1
                             B      618 	DEFB	06Ch						; L - l
000001B5 6C                  B+     618 	DB P1
                             B      619 	DEFB	06Fh						; O - o
000001B6 6F                  B+     619 	DB P1
                             B      620 	DEFB	039h						; 9 - 9
000001B7 39                  B+     620 	DB P1
                             B      621 	DEFB	032h						; 2 - 2
000001B8 32                  B+     621 	DB P1
                             B      622 	DEFB	077h						; W - w
000001B9 77                  B+     622 	DB P1
                             B      623 	DEFB	073h						; S - s
000001BA 73                  B+     623 	DB P1
                             B      624 	DEFB	000h						; SYMBOL
000001BB 00                  B+     624 	DB P1
                             B      625 	DEFB	020h						; SPACE
000001BC 20                  B+     625 	DB P1
                             B      626 	DEFB	00Dh						; ENTER
000001BD 0D                  B+     626 	DB P1
                             B      627 	DEFB	070h						; P - p
000001BE 70                  B+     627 	DB P1
                             B      628 	DEFB	030h						; 0 - 0
000001BF 30                  B+     628 	DB P1
                             B      629 	DEFB	031h						; 1 - 1
000001C0 31                  B+     629 	DB P1
                             B      630 	DEFB	071h						; Q - q
000001C1 71                  B+     630 	DB P1
                             B      631 	DEFB	061h						; A - a
000001C2 61                  B+     631 	DB P1
                             B      632 	DEFB	000h						; SHIFT
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   15


Ace3NOKB.asm

Location Object              Type  Line Source
000001C3 00                  B+     632 	DB P1
                             B      633 
                             B      634 ; ---------------------
                             B      635 ; THE '40 SHIFTED KEYS'
                             B      636 ; ---------------------
                             B      637 
                             B      638 	DEFB	056h						; V - V
000001C4 56                  B+     638 	DB P1
                             B      639 	DEFB	048h						; H - H
000001C5 48                  B+     639 	DB P1
                             B      640 	DEFB	059h						; Y - Y
000001C6 59                  B+     640 	DB P1
                             B      641 	DEFB	007h						; 6 - 7 KEY-UP
000001C7 07                  B+     641 	DB P1
                             B      642 	DEFB	001h						; 5 - 1 KEY-LEFT
000001C8 01                  B+     642 	DB P1
                             B      643 	DEFB	054h						;
000001C9 54                  B+     643 	DB P1
                             B      644 	DEFB	047h
000001CA 47                  B+     644 	DB P1
                             B      645 	DEFB	043h
000001CB 43                  B+     645 	DB P1
                             B      646 	DEFB	042h
000001CC 42                  B+     646 	DB P1
                             B      647 	DEFB	04Ah
000001CD 4A                  B+     647 	DB P1
                             B      648 	DEFB	055h
000001CE 55                  B+     648 	DB P1
                             B      649 	DEFB	009h						; 7 - 9 KEY-DOWN
000001CF 09                  B+     649 	DB P1
                             B      650 	DEFB	008h						; 4 - 8 INV-VIDEO
000001D0 08                  B+     650 	DB P1
                             B      651 	DEFB	052h
000001D1 52                  B+     651 	DB P1
                             B      652 	DEFB	046h
000001D2 46                  B+     652 	DB P1
                             B      653 	DEFB	058h
000001D3 58                  B+     653 	DB P1
                             B      654 	DEFB	04Eh
000001D4 4E                  B+     654 	DB P1
                             B      655 	DEFB	04Bh
000001D5 4B                  B+     655 	DB P1
                             B      656 	DEFB	049h
000001D6 49                  B+     656 	DB P1
                             B      657 	DEFB	003h						; 8 - 3 KEY-RIGHT
000001D7 03                  B+     657 	DB P1
                             B      658 	DEFB	033h						; 3 - 3
000001D8 33                  B+     658 	DB P1
                             B      659 	DEFB	045h
000001D9 45                  B+     659 	DB P1
                             B      660 	DEFB	044h
000001DA 44                  B+     660 	DB P1
                             B      661 	DEFB	05Ah
000001DB 5A                  B+     661 	DB P1
                             B      662 	DEFB	04Dh
000001DC 4D                  B+     662 	DB P1
                             B      663 	DEFB	04Ch
000001DD 4C                  B+     663 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   16


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      664 	DEFB	04Fh
000001DE 4F                  B+     664 	DB P1
                             B      665 	DEFB	004h						; 9 - 4 GRAPH
000001DF 04                  B+     665 	DB P1
                             B      666 	DEFB	002h						; 2 - 2 CAPS LOCK
000001E0 02                  B+     666 	DB P1
                             B      667 	DEFB	057h						; W - W
000001E1 57                  B+     667 	DB P1
                             B      668 	DEFB	053h						; S - S
000001E2 53                  B+     668 	DB P1
                             B      669 	DEFB	000h						; SYMB
000001E3 00                  B+     669 	DB P1
                             B      670 	DEFB	020h						; SPACE
000001E4 20                  B+     670 	DB P1
                             B      671 	DEFB	00Dh						; ENTER
000001E5 0D                  B+     671 	DB P1
                             B      672 	DEFB	050h						; P - P
000001E6 50                  B+     672 	DB P1
                             B      673 	DEFB	005h						; 0 - 5   DEL
000001E7 05                  B+     673 	DB P1
                             B      674 	DEFB	00Ah						; 1 - 0A  DEL_LINE
000001E8 0A                  B+     674 	DB P1
                             B      675 	DEFB	051h						; Q - Q
000001E9 51                  B+     675 	DB P1
                             B      676 	DEFB	041h						; A - A
000001EA 41                  B+     676 	DB P1
                             B      677 	DEFB	000h						; SHIFT
000001EB 00                  B+     677 	DB P1
                             B      678 
                             B      679 ; --------------------------
                             B      680 ; THE '40 SYMBOL SHIFT KEYS'
                             B      681 ; --------------------------
                             B      682 
                             B      683 	DEFB	02Fh						; V - /
000001EC 2F                  B+     683 	DB P1
                             B      684 	DEFB	05Eh						; H - ^
000001ED 5E                  B+     684 	DB P1
                             B      685 	DEFB	05Bh						; Y - [
000001EE 5B                  B+     685 	DB P1
                             B      686 	DEFB	026h						; 6 - &
000001EF 26                  B+     686 	DB P1
                             B      687 	DEFB	025h						; 5 - %
000001F0 25                  B+     687 	DB P1
                             B      688 	DEFB	03Eh						; T - >
000001F1 3E                  B+     688 	DB P1
                             B      689 	DEFB	07Dh						;
000001F2 7D                  B+     689 	DB P1
                             B      690 	DEFB	03Fh
000001F3 3F                  B+     690 	DB P1
                             B      691 	DEFB	02Ah
000001F4 2A                  B+     691 	DB P1
                             B      692 	DEFB	02Dh
000001F5 2D                  B+     692 	DB P1
                             B      693 	DEFB	05Dh
000001F6 5D                  B+     693 	DB P1
                             B      694 	DEFB	027h
000001F7 27                  B+     694 	DB P1
                             B      695 	DEFB	024h
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   17


Ace3NOKB.asm

Location Object              Type  Line Source
000001F8 24                  B+     695 	DB P1
                             B      696 	DEFB	03Ch
000001F9 3C                  B+     696 	DB P1
                             B      697 	DEFB	07Bh
000001FA 7B                  B+     697 	DB P1
                             B      698 	DEFB	060h
000001FB 60                  B+     698 	DB P1
                             B      699 	DEFB	02Ch
000001FC 2C                  B+     699 	DB P1
                             B      700 	DEFB	02Bh
000001FD 2B                  B+     700 	DB P1
                             B      701 	DEFB	07Fh
000001FE 7F                  B+     701 	DB P1
                             B      702 	DEFB	028h
000001FF 28                  B+     702 	DB P1
                             B      703 	DEFB	023h
00000200 23                  B+     703 	DB P1
                             B      704 	DEFB	045h
00000201 45                  B+     704 	DB P1
                             B      705 	DEFB	05Ch
00000202 5C                  B+     705 	DB P1
                             B      706 	DEFB	03Ah
00000203 3A                  B+     706 	DB P1
                             B      707 	DEFB	02Eh
00000204 2E                  B+     707 	DB P1
                             B      708 	DEFB	03Dh
00000205 3D                  B+     708 	DB P1
                             B      709 	DEFB	03Bh
00000206 3B                  B+     709 	DB P1
                             B      710 	DEFB	029h
00000207 29                  B+     710 	DB P1
                             B      711 	DEFB	040h						; 2 - @
00000208 40                  B+     711 	DB P1
                             B      712 	DEFB	057h						; W - W
00000209 57                  B+     712 	DB P1
                             B      713 	DEFB	07Ch						; S
0000020A 7C                  B+     713 	DB P1
                             B      714 	DEFB	000h						; SYMB
0000020B 00                  B+     714 	DB P1
                             B      715 	DEFB	020h						; SPACE
0000020C 20                  B+     715 	DB P1
                             B      716 	DEFB	00Dh						; ENTER
0000020D 0D                  B+     716 	DB P1
                             B      717 	DEFB	022h						; P - "
0000020E 22                  B+     717 	DB P1
                             B      718 	DEFB	05Fh						; 0 - _
0000020F 5F                  B+     718 	DB P1
                             B      719 	DEFB	021h						; 1 - !
00000210 21                  B+     719 	DB P1
                             B      720 	DEFB	051h						; Q - Q
00000211 51                  B+     720 	DB P1
                             B      721 	DEFB	07Eh						; A - ~
00000212 7E                  B+     721 	DB P1
                             B      722 	DEFB	000h						; SHIFT
00000213 00                  B+     722 	DB P1
                             B      723 
                             B      724 ; end of key tables
                             B      725 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   18


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      726 
                             B      727 ; -------------------
                             B      728 ; THE 'CHARACTER SET'
                             B      729 ; -------------------
                             B      730 ; The 96 ASCII character bitmaps are copied to RAM during initialization and
                             B      731 ; the 8x8 characters can afterwards be redefined by the user.
                             B      732 ; Some ROM space is saved by supplying the blank top line of most characters
                             B      733 ; and in case of the middle range (capitals with no descenders) the bottom
                             B      734 ; line as well. Only the final copyright symbol is held in ROM as an 8x8
                             B      735 ; character.
                             B      736 
                             B      737 
                             B      738 ; 020h - Character: ' '			CHR0h(32)
                             B      739 
00000214                     B      740 L1D7B:
                             B      741 	DEFB	00000000B
00000214 00                  B+     741 	DB P1
                             B      742 	DEFB	00000000B
00000215 00                  B+     742 	DB P1
                             B      743 	DEFB	00000000B
00000216 00                  B+     743 	DB P1
                             B      744 	DEFB	00000000B
00000217 00                  B+     744 	DB P1
                             B      745 	DEFB	00000000B
00000218 00                  B+     745 	DB P1
                             B      746 	DEFB	00000000B
00000219 00                  B+     746 	DB P1
                             B      747 	DEFB	00000000B
0000021A 00                  B+     747 	DB P1
                             B      748 
                             B      749 ; 021h - Character: '!'			CHR0h(33)
                             B      750 
                             B      751 	DEFB	00010000B
0000021B 10                  B+     751 	DB P1
                             B      752 	DEFB	00010000B
0000021C 10                  B+     752 	DB P1
                             B      753 	DEFB	00010000B
0000021D 10                  B+     753 	DB P1
                             B      754 	DEFB	00010000B
0000021E 10                  B+     754 	DB P1
                             B      755 	DEFB	00000000B
0000021F 00                  B+     755 	DB P1
                             B      756 	DEFB	00010000B
00000220 10                  B+     756 	DB P1
                             B      757 	DEFB	00000000B
00000221 00                  B+     757 	DB P1
                             B      758 
                             B      759 ; 022h - Character: '"'			CHR0h(34)
                             B      760 
                             B      761 	DEFB	00100100B
00000222 24                  B+     761 	DB P1
                             B      762 	DEFB	00100100B
00000223 24                  B+     762 	DB P1
                             B      763 	DEFB	00000000B
00000224 00                  B+     763 	DB P1
                             B      764 	DEFB	00000000B
00000225 00                  B+     764 	DB P1
                             B      765 	DEFB	00000000B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   19


Ace3NOKB.asm

Location Object              Type  Line Source
00000226 00                  B+     765 	DB P1
                             B      766 	DEFB	00000000B
00000227 00                  B+     766 	DB P1
                             B      767 	DEFB	00000000B
00000228 00                  B+     767 	DB P1
                             B      768 
                             B      769 ; 023h - Character: '#'			CHR0h(35)
                             B      770 
                             B      771 	DEFB	00100100B
00000229 24                  B+     771 	DB P1
                             B      772 	DEFB	01111110B
0000022A 7E                  B+     772 	DB P1
                             B      773 	DEFB	00100100B
0000022B 24                  B+     773 	DB P1
                             B      774 	DEFB	00100100B
0000022C 24                  B+     774 	DB P1
                             B      775 	DEFB	01111110B
0000022D 7E                  B+     775 	DB P1
                             B      776 	DEFB	00100100B
0000022E 24                  B+     776 	DB P1
                             B      777 	DEFB	00000000B
0000022F 00                  B+     777 	DB P1
                             B      778 
                             B      779 ; 024h - Character: '0h'			CHR0h(36)
                             B      780 
                             B      781 	DEFB	00001000B
00000230 08                  B+     781 	DB P1
                             B      782 	DEFB	00111110B
00000231 3E                  B+     782 	DB P1
                             B      783 	DEFB	00101000B
00000232 28                  B+     783 	DB P1
                             B      784 	DEFB	00111110B
00000233 3E                  B+     784 	DB P1
                             B      785 	DEFB	00001010B
00000234 0A                  B+     785 	DB P1
                             B      786 	DEFB	00111110B
00000235 3E                  B+     786 	DB P1
                             B      787 	DEFB	00001000B
00000236 08                  B+     787 	DB P1
                             B      788 
                             B      789 ; 025h - Character: '%'			CHR0h(37)
                             B      790 
                             B      791 	DEFB	01100010B
00000237 62                  B+     791 	DB P1
                             B      792 	DEFB	01100100B
00000238 64                  B+     792 	DB P1
                             B      793 	DEFB	00001000B
00000239 08                  B+     793 	DB P1
                             B      794 	DEFB	00010000B
0000023A 10                  B+     794 	DB P1
                             B      795 	DEFB	00100110B
0000023B 26                  B+     795 	DB P1
                             B      796 	DEFB	01000110B
0000023C 46                  B+     796 	DB P1
                             B      797 	DEFB	00000000B
0000023D 00                  B+     797 	DB P1
                             B      798 
                             B      799 ; 026h - Character: '&'			CHR0h(38)
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   20


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      800 
                             B      801 	DEFB	00010000B
0000023E 10                  B+     801 	DB P1
                             B      802 	DEFB	00101000B
0000023F 28                  B+     802 	DB P1
                             B      803 	DEFB	00010000B
00000240 10                  B+     803 	DB P1
                             B      804 	DEFB	00101010B
00000241 2A                  B+     804 	DB P1
                             B      805 	DEFB	01000100B
00000242 44                  B+     805 	DB P1
                             B      806 	DEFB	00111010B
00000243 3A                  B+     806 	DB P1
                             B      807 	DEFB	00000000B
00000244 00                  B+     807 	DB P1
                             B      808 
                             B      809 ; 027h - Character: '''			CHR0h(39)
                             B      810 
                             B      811 	DEFB	00001000B
00000245 08                  B+     811 	DB P1
                             B      812 	DEFB	00010000B
00000246 10                  B+     812 	DB P1
                             B      813 	DEFB	00000000B
00000247 00                  B+     813 	DB P1
                             B      814 	DEFB	00000000B
00000248 00                  B+     814 	DB P1
                             B      815 	DEFB	00000000B
00000249 00                  B+     815 	DB P1
                             B      816 	DEFB	00000000B
0000024A 00                  B+     816 	DB P1
                             B      817 	DEFB	00000000B
0000024B 00                  B+     817 	DB P1
                             B      818 
                             B      819 ; 028h - Character: '('			CHR0h(40)
                             B      820 
                             B      821 	DEFB	00000100B
0000024C 04                  B+     821 	DB P1
                             B      822 	DEFB	00001000B
0000024D 08                  B+     822 	DB P1
                             B      823 	DEFB	00001000B
0000024E 08                  B+     823 	DB P1
                             B      824 	DEFB	00001000B
0000024F 08                  B+     824 	DB P1
                             B      825 	DEFB	00001000B
00000250 08                  B+     825 	DB P1
                             B      826 	DEFB	00000100B
00000251 04                  B+     826 	DB P1
                             B      827 	DEFB	00000000B
00000252 00                  B+     827 	DB P1
                             B      828 
                             B      829 ; 029h - Character: ')'			CHR0h(42)
                             B      830 
                             B      831 	DEFB	00100000B
00000253 20                  B+     831 	DB P1
                             B      832 	DEFB	00010000B
00000254 10                  B+     832 	DB P1
                             B      833 	DEFB	00010000B
00000255 10                  B+     833 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   21


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      834 	DEFB	00010000B
00000256 10                  B+     834 	DB P1
                             B      835 	DEFB	00010000B
00000257 10                  B+     835 	DB P1
                             B      836 	DEFB	00100000B
00000258 20                  B+     836 	DB P1
                             B      837 	DEFB	00000000B
00000259 00                  B+     837 	DB P1
                             B      838 
                             B      839 ; 02Ah - Character: '*'			CHR0h(42)
                             B      840 
                             B      841 	DEFB	00000000B
0000025A 00                  B+     841 	DB P1
                             B      842 	DEFB	00010100B
0000025B 14                  B+     842 	DB P1
                             B      843 	DEFB	00001000B
0000025C 08                  B+     843 	DB P1
                             B      844 	DEFB	00111110B
0000025D 3E                  B+     844 	DB P1
                             B      845 	DEFB	00001000B
0000025E 08                  B+     845 	DB P1
                             B      846 	DEFB	00010100B
0000025F 14                  B+     846 	DB P1
                             B      847 	DEFB	00000000B
00000260 00                  B+     847 	DB P1
                             B      848 
                             B      849 ; 02Bh - Character: '+'			CHR0h(43)
                             B      850 
                             B      851 	DEFB	00000000B
00000261 00                  B+     851 	DB P1
                             B      852 	DEFB	00001000B
00000262 08                  B+     852 	DB P1
                             B      853 	DEFB	00001000B
00000263 08                  B+     853 	DB P1
                             B      854 	DEFB	00111110B
00000264 3E                  B+     854 	DB P1
                             B      855 	DEFB	00001000B
00000265 08                  B+     855 	DB P1
                             B      856 	DEFB	00001000B
00000266 08                  B+     856 	DB P1
                             B      857 	DEFB	00000000B
00000267 00                  B+     857 	DB P1
                             B      858 
                             B      859 ; 02Ch - Character: ','			CHR0h(44)
                             B      860 
                             B      861 	DEFB	00000000B
00000268 00                  B+     861 	DB P1
                             B      862 	DEFB	00000000B
00000269 00                  B+     862 	DB P1
                             B      863 	DEFB	00000000B
0000026A 00                  B+     863 	DB P1
                             B      864 	DEFB	00000000B
0000026B 00                  B+     864 	DB P1
                             B      865 	DEFB	00001000B
0000026C 08                  B+     865 	DB P1
                             B      866 	DEFB	00001000B
0000026D 08                  B+     866 	DB P1
                             B      867 	DEFB	00010000B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   22


Ace3NOKB.asm

Location Object              Type  Line Source
0000026E 10                  B+     867 	DB P1
                             B      868 
                             B      869 ; 02Dh - Character: '-'			CHR0h(45)
                             B      870 
                             B      871 	DEFB	00000000B
0000026F 00                  B+     871 	DB P1
                             B      872 	DEFB	00000000B
00000270 00                  B+     872 	DB P1
                             B      873 	DEFB	00000000B
00000271 00                  B+     873 	DB P1
                             B      874 	DEFB	00111110B
00000272 3E                  B+     874 	DB P1
                             B      875 	DEFB	00000000B
00000273 00                  B+     875 	DB P1
                             B      876 	DEFB	00000000B
00000274 00                  B+     876 	DB P1
                             B      877 	DEFB	00000000B
00000275 00                  B+     877 	DB P1
                             B      878 
                             B      879 ; 02Eh - Character: '.'			CHR0h(46)
                             B      880 
                             B      881 	DEFB	00000000B
00000276 00                  B+     881 	DB P1
                             B      882 	DEFB	00000000B
00000277 00                  B+     882 	DB P1
                             B      883 	DEFB	00000000B
00000278 00                  B+     883 	DB P1
                             B      884 	DEFB	00000000B
00000279 00                  B+     884 	DB P1
                             B      885 	DEFB	00011000B
0000027A 18                  B+     885 	DB P1
                             B      886 	DEFB	00011000B
0000027B 18                  B+     886 	DB P1
                             B      887 	DEFB	00000000B
0000027C 00                  B+     887 	DB P1
                             B      888 
                             B      889 ; 02Fh - Character: '/'			CHR0h(47)
                             B      890 
                             B      891 	DEFB	00000000B
0000027D 00                  B+     891 	DB P1
                             B      892 	DEFB	00000010B
0000027E 02                  B+     892 	DB P1
                             B      893 	DEFB	00000100B
0000027F 04                  B+     893 	DB P1
                             B      894 	DEFB	00001000B
00000280 08                  B+     894 	DB P1
                             B      895 	DEFB	00010000B
00000281 10                  B+     895 	DB P1
                             B      896 	DEFB	00100000B
00000282 20                  B+     896 	DB P1
                             B      897 	DEFB	00000000B
00000283 00                  B+     897 	DB P1
                             B      898 
                             B      899 ; 030h - Character: '0'			CHR0h(48)
                             B      900 
                             B      901 	DEFB	00111100B
00000284 3C                  B+     901 	DB P1
                             B      902 	DEFB	01000110B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   23


Ace3NOKB.asm

Location Object              Type  Line Source
00000285 46                  B+     902 	DB P1
                             B      903 	DEFB	01001010B
00000286 4A                  B+     903 	DB P1
                             B      904 	DEFB	01010010B
00000287 52                  B+     904 	DB P1
                             B      905 	DEFB	01100010B
00000288 62                  B+     905 	DB P1
                             B      906 	DEFB	00111100B
00000289 3C                  B+     906 	DB P1
                             B      907 	DEFB	00000000B
0000028A 00                  B+     907 	DB P1
                             B      908 
                             B      909 ; 031h - Character: '1'			CHR0h(49)
                             B      910 
                             B      911 	DEFB	00011000B
0000028B 18                  B+     911 	DB P1
                             B      912 	DEFB	00101000B
0000028C 28                  B+     912 	DB P1
                             B      913 	DEFB	00001000B
0000028D 08                  B+     913 	DB P1
                             B      914 	DEFB	00001000B
0000028E 08                  B+     914 	DB P1
                             B      915 	DEFB	00001000B
0000028F 08                  B+     915 	DB P1
                             B      916 	DEFB	00111110B
00000290 3E                  B+     916 	DB P1
                             B      917 	DEFB	00000000B
00000291 00                  B+     917 	DB P1
                             B      918 
                             B      919 ; 032h - Character: '2'			CHR0h(50)
                             B      920 
                             B      921 	DEFB	00111100B
00000292 3C                  B+     921 	DB P1
                             B      922 	DEFB	01000010B
00000293 42                  B+     922 	DB P1
                             B      923 	DEFB	00000010B
00000294 02                  B+     923 	DB P1
                             B      924 	DEFB	00111100B
00000295 3C                  B+     924 	DB P1
                             B      925 	DEFB	01000000B
00000296 40                  B+     925 	DB P1
                             B      926 	DEFB	01111110B
00000297 7E                  B+     926 	DB P1
                             B      927 	DEFB	00000000B
00000298 00                  B+     927 	DB P1
                             B      928 
                             B      929 ; 033h - Character: '3'			CHR0h(51)
                             B      930 
                             B      931 	DEFB	00111100B
00000299 3C                  B+     931 	DB P1
                             B      932 	DEFB	01000010B
0000029A 42                  B+     932 	DB P1
                             B      933 	DEFB	00001100B
0000029B 0C                  B+     933 	DB P1
                             B      934 	DEFB	00000010B
0000029C 02                  B+     934 	DB P1
                             B      935 	DEFB	01000010B
0000029D 42                  B+     935 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   24


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      936 	DEFB	00111100B
0000029E 3C                  B+     936 	DB P1
                             B      937 	DEFB	00000000B
0000029F 00                  B+     937 	DB P1
                             B      938 
                             B      939 ; 034h - Character: '4'			CHR0h(52)
                             B      940 
                             B      941 	DEFB	00001000B
000002A0 08                  B+     941 	DB P1
                             B      942 	DEFB	00011000B
000002A1 18                  B+     942 	DB P1
                             B      943 	DEFB	00101000B
000002A2 28                  B+     943 	DB P1
                             B      944 	DEFB	01001000B
000002A3 48                  B+     944 	DB P1
                             B      945 	DEFB	01111110B
000002A4 7E                  B+     945 	DB P1
                             B      946 	DEFB	00001000B
000002A5 08                  B+     946 	DB P1
                             B      947 	DEFB	00000000B
000002A6 00                  B+     947 	DB P1
                             B      948 
                             B      949 ; 035h - Character: '5'			CHR0h(53)
                             B      950 
                             B      951 	DEFB	01111110B
000002A7 7E                  B+     951 	DB P1
                             B      952 	DEFB	01000000B
000002A8 40                  B+     952 	DB P1
                             B      953 	DEFB	01111100B
000002A9 7C                  B+     953 	DB P1
                             B      954 	DEFB	00000010B
000002AA 02                  B+     954 	DB P1
                             B      955 	DEFB	01000010B
000002AB 42                  B+     955 	DB P1
                             B      956 	DEFB	00111100B
000002AC 3C                  B+     956 	DB P1
                             B      957 	DEFB	00000000B
000002AD 00                  B+     957 	DB P1
                             B      958 
                             B      959 ; 036h - Character: '6'			CHR0h(54)
                             B      960 
                             B      961 	DEFB	00111100B
000002AE 3C                  B+     961 	DB P1
                             B      962 	DEFB	01000000B
000002AF 40                  B+     962 	DB P1
                             B      963 	DEFB	01111100B
000002B0 7C                  B+     963 	DB P1
                             B      964 	DEFB	01000010B
000002B1 42                  B+     964 	DB P1
                             B      965 	DEFB	01000010B
000002B2 42                  B+     965 	DB P1
                             B      966 	DEFB	00111100B
000002B3 3C                  B+     966 	DB P1
                             B      967 	DEFB	00000000B
000002B4 00                  B+     967 	DB P1
                             B      968 
                             B      969 ; 037h - Character: '7'			CHR0h(55)
                             B      970 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   25


Ace3NOKB.asm

Location Object              Type  Line Source
                             B      971 	DEFB	01111110B
000002B5 7E                  B+     971 	DB P1
                             B      972 	DEFB	00000010B
000002B6 02                  B+     972 	DB P1
                             B      973 	DEFB	00000100B
000002B7 04                  B+     973 	DB P1
                             B      974 	DEFB	00001000B
000002B8 08                  B+     974 	DB P1
                             B      975 	DEFB	00010000B
000002B9 10                  B+     975 	DB P1
                             B      976 	DEFB	00010000B
000002BA 10                  B+     976 	DB P1
                             B      977 	DEFB	00000000B
000002BB 00                  B+     977 	DB P1
                             B      978 
                             B      979 ; 038h - Character: '8'			CHR0h(56)
                             B      980 
                             B      981 	DEFB	00111100B
000002BC 3C                  B+     981 	DB P1
                             B      982 	DEFB	01000010B
000002BD 42                  B+     982 	DB P1
                             B      983 	DEFB	00111100B
000002BE 3C                  B+     983 	DB P1
                             B      984 	DEFB	01000010B
000002BF 42                  B+     984 	DB P1
                             B      985 	DEFB	01000010B
000002C0 42                  B+     985 	DB P1
                             B      986 	DEFB	00111100B
000002C1 3C                  B+     986 	DB P1
                             B      987 	DEFB	00000000B
000002C2 00                  B+     987 	DB P1
                             B      988 
                             B      989 ; 039h - Character: '9'			CHR0h(57)
                             B      990 
                             B      991 	DEFB	00111100B
000002C3 3C                  B+     991 	DB P1
                             B      992 	DEFB	01000010B
000002C4 42                  B+     992 	DB P1
                             B      993 	DEFB	01000010B
000002C5 42                  B+     993 	DB P1
                             B      994 	DEFB	00111110B
000002C6 3E                  B+     994 	DB P1
                             B      995 	DEFB	00000010B
000002C7 02                  B+     995 	DB P1
                             B      996 	DEFB	00111100B
000002C8 3C                  B+     996 	DB P1
                             B      997 	DEFB	00000000B
000002C9 00                  B+     997 	DB P1
                             B      998 
                             B      999 ; 03Ah - Character: ':'			CHR0h(58)
                             B     1000 
                             B     1001 	DEFB	00000000B
000002CA 00                  B+    1001 	DB P1
                             B     1002 	DEFB	00000000B
000002CB 00                  B+    1002 	DB P1
                             B     1003 	DEFB	00010000B
000002CC 10                  B+    1003 	DB P1
                             B     1004 	DEFB	00000000B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   26


Ace3NOKB.asm

Location Object              Type  Line Source
000002CD 00                  B+    1004 	DB P1
                             B     1005 	DEFB	00000000B
000002CE 00                  B+    1005 	DB P1
                             B     1006 	DEFB	00010000B
000002CF 10                  B+    1006 	DB P1
                             B     1007 	DEFB	00000000B
000002D0 00                  B+    1007 	DB P1
                             B     1008 
                             B     1009 ; 03Bh - Character: ';'			CHR0h(59)
                             B     1010 
                             B     1011 	DEFB	00000000B
000002D1 00                  B+    1011 	DB P1
                             B     1012 	DEFB	00010000B
000002D2 10                  B+    1012 	DB P1
                             B     1013 	DEFB	00000000B
000002D3 00                  B+    1013 	DB P1
                             B     1014 	DEFB	00000000B
000002D4 00                  B+    1014 	DB P1
                             B     1015 	DEFB	00010000B
000002D5 10                  B+    1015 	DB P1
                             B     1016 	DEFB	00010000B
000002D6 10                  B+    1016 	DB P1
                             B     1017 	DEFB	00100000B
000002D7 20                  B+    1017 	DB P1
                             B     1018 
                             B     1019 ; 03Ch - Character: '<'			CHR0h(60)
                             B     1020 
                             B     1021 	DEFB	00000000B
000002D8 00                  B+    1021 	DB P1
                             B     1022 	DEFB	00000100B
000002D9 04                  B+    1022 	DB P1
                             B     1023 	DEFB	00001000B
000002DA 08                  B+    1023 	DB P1
                             B     1024 	DEFB	00010000B
000002DB 10                  B+    1024 	DB P1
                             B     1025 	DEFB	00001000B
000002DC 08                  B+    1025 	DB P1
                             B     1026 	DEFB	00000100B
000002DD 04                  B+    1026 	DB P1
                             B     1027 	DEFB	00000000B
000002DE 00                  B+    1027 	DB P1
                             B     1028 
                             B     1029 ; 03Dh - Character: '='			CHR0h(61)
                             B     1030 
                             B     1031 	DEFB	00000000B
000002DF 00                  B+    1031 	DB P1
                             B     1032 	DEFB	00000000B
000002E0 00                  B+    1032 	DB P1
                             B     1033 	DEFB	00111110B
000002E1 3E                  B+    1033 	DB P1
                             B     1034 	DEFB	00000000B
000002E2 00                  B+    1034 	DB P1
                             B     1035 	DEFB	00111110B
000002E3 3E                  B+    1035 	DB P1
                             B     1036 	DEFB	00000000B
000002E4 00                  B+    1036 	DB P1
                             B     1037 	DEFB	00000000B
000002E5 00                  B+    1037 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   27


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1038 
                             B     1039 ; 03Eh - Character: '>'			CHR0h(62)
                             B     1040 
                             B     1041 	DEFB	00000000B
000002E6 00                  B+    1041 	DB P1
                             B     1042 	DEFB	00010000B
000002E7 10                  B+    1042 	DB P1
                             B     1043 	DEFB	00001000B
000002E8 08                  B+    1043 	DB P1
                             B     1044 	DEFB	00000100B
000002E9 04                  B+    1044 	DB P1
                             B     1045 	DEFB	00001000B
000002EA 08                  B+    1045 	DB P1
                             B     1046 	DEFB	00010000B
000002EB 10                  B+    1046 	DB P1
                             B     1047 	DEFB	00000000B
000002EC 00                  B+    1047 	DB P1
                             B     1048 
                             B     1049 ; 03Fh - Character: '?'			CHR0h(63)
                             B     1050 
                             B     1051 	DEFB	00111100B
000002ED 3C                  B+    1051 	DB P1
                             B     1052 	DEFB	01000010B
000002EE 42                  B+    1052 	DB P1
                             B     1053 	DEFB	00000100B
000002EF 04                  B+    1053 	DB P1
                             B     1054 	DEFB	00001000B
000002F0 08                  B+    1054 	DB P1
                             B     1055 	DEFB	00000000B
000002F1 00                  B+    1055 	DB P1
                             B     1056 	DEFB	00001000B
000002F2 08                  B+    1056 	DB P1
                             B     1057 
                             B     1058 ; 040h - Character: '@'			CHR0h(64)
                             B     1059 
                             B     1060 	DEFB	00111100B
000002F3 3C                  B+    1060 	DB P1
                             B     1061 	DEFB	01001010B
000002F4 4A                  B+    1061 	DB P1
                             B     1062 	DEFB	01010110B
000002F5 56                  B+    1062 	DB P1
                             B     1063 	DEFB	01011110B
000002F6 5E                  B+    1063 	DB P1
                             B     1064 	DEFB	01000000B
000002F7 40                  B+    1064 	DB P1
                             B     1065 	DEFB	00111100B
000002F8 3C                  B+    1065 	DB P1
                             B     1066 
                             B     1067 ; 041h - Character: 'A'			CHR0h(65)
                             B     1068 
                             B     1069 	DEFB	00111100B
000002F9 3C                  B+    1069 	DB P1
                             B     1070 	DEFB	01000010B
000002FA 42                  B+    1070 	DB P1
                             B     1071 	DEFB	01000010B
000002FB 42                  B+    1071 	DB P1
                             B     1072 	DEFB	01111110B
000002FC 7E                  B+    1072 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   28


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1073 	DEFB	01000010B
000002FD 42                  B+    1073 	DB P1
                             B     1074 	DEFB	01000010B
000002FE 42                  B+    1074 	DB P1
                             B     1075 
                             B     1076 ; 042h - Character: 'B'			CHR0h(66)
                             B     1077 
                             B     1078 	DEFB	01111100B
000002FF 7C                  B+    1078 	DB P1
                             B     1079 	DEFB	01000010B
00000300 42                  B+    1079 	DB P1
                             B     1080 	DEFB	01111100B
00000301 7C                  B+    1080 	DB P1
                             B     1081 	DEFB	01000010B
00000302 42                  B+    1081 	DB P1
                             B     1082 	DEFB	01000010B
00000303 42                  B+    1082 	DB P1
                             B     1083 	DEFB	01111100B
00000304 7C                  B+    1083 	DB P1
                             B     1084 
                             B     1085 ; 043h - Character: 'C'			CHR0h(67)
                             B     1086 
                             B     1087 	DEFB	00111100B
00000305 3C                  B+    1087 	DB P1
                             B     1088 	DEFB	01000010B
00000306 42                  B+    1088 	DB P1
                             B     1089 	DEFB	01000000B
00000307 40                  B+    1089 	DB P1
                             B     1090 	DEFB	01000000B
00000308 40                  B+    1090 	DB P1
                             B     1091 	DEFB	01000010B
00000309 42                  B+    1091 	DB P1
                             B     1092 	DEFB	00111100B
0000030A 3C                  B+    1092 	DB P1
                             B     1093 
                             B     1094 ; 044h - Character: 'D'			CHR0h(68)
                             B     1095 
                             B     1096 	DEFB	01111000B
0000030B 78                  B+    1096 	DB P1
                             B     1097 	DEFB	01000100B
0000030C 44                  B+    1097 	DB P1
                             B     1098 	DEFB	01000010B
0000030D 42                  B+    1098 	DB P1
                             B     1099 	DEFB	01000010B
0000030E 42                  B+    1099 	DB P1
                             B     1100 	DEFB	01000100B
0000030F 44                  B+    1100 	DB P1
                             B     1101 	DEFB	01111000B
00000310 78                  B+    1101 	DB P1
                             B     1102 
                             B     1103 ; 045h - Character: 'E'			CHR0h(69)
                             B     1104 
                             B     1105 	DEFB	01111110B
00000311 7E                  B+    1105 	DB P1
                             B     1106 	DEFB	01000000B
00000312 40                  B+    1106 	DB P1
                             B     1107 	DEFB	01111100B
00000313 7C                  B+    1107 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   29


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1108 	DEFB	01000000B
00000314 40                  B+    1108 	DB P1
                             B     1109 	DEFB	01000000B
00000315 40                  B+    1109 	DB P1
                             B     1110 	DEFB	01111110B
00000316 7E                  B+    1110 	DB P1
                             B     1111 
                             B     1112 ; 046h - Character: 'F'			CHR0h(70)
                             B     1113 
                             B     1114 	DEFB	01111110B
00000317 7E                  B+    1114 	DB P1
                             B     1115 	DEFB	01000000B
00000318 40                  B+    1115 	DB P1
                             B     1116 	DEFB	01111100B
00000319 7C                  B+    1116 	DB P1
                             B     1117 	DEFB	01000000B
0000031A 40                  B+    1117 	DB P1
                             B     1118 	DEFB	01000000B
0000031B 40                  B+    1118 	DB P1
                             B     1119 	DEFB	01000000B
0000031C 40                  B+    1119 	DB P1
                             B     1120 
                             B     1121 ; 047h - Character: 'G'			CHR0h(71)
                             B     1122 
                             B     1123 	DEFB	00111100B
0000031D 3C                  B+    1123 	DB P1
                             B     1124 	DEFB	01000010B
0000031E 42                  B+    1124 	DB P1
                             B     1125 	DEFB	01000000B
0000031F 40                  B+    1125 	DB P1
                             B     1126 	DEFB	01001110B
00000320 4E                  B+    1126 	DB P1
                             B     1127 	DEFB	01000010B
00000321 42                  B+    1127 	DB P1
                             B     1128 	DEFB	00111100B
00000322 3C                  B+    1128 	DB P1
                             B     1129 
                             B     1130 ; 048h - Character: 'H'			CHR0h(72)
                             B     1131 
                             B     1132 	DEFB	01000010B
00000323 42                  B+    1132 	DB P1
                             B     1133 	DEFB	01000010B
00000324 42                  B+    1133 	DB P1
                             B     1134 	DEFB	01111110B
00000325 7E                  B+    1134 	DB P1
                             B     1135 	DEFB	01000010B
00000326 42                  B+    1135 	DB P1
                             B     1136 	DEFB	01000010B
00000327 42                  B+    1136 	DB P1
                             B     1137 	DEFB	01000010B
00000328 42                  B+    1137 	DB P1
                             B     1138 
                             B     1139 ; 049h - Character: 'I'			CHR0h(73)
                             B     1140 
                             B     1141 	DEFB	00111110B
00000329 3E                  B+    1141 	DB P1
                             B     1142 	DEFB	00001000B
0000032A 08                  B+    1142 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   30


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1143 	DEFB	00001000B
0000032B 08                  B+    1143 	DB P1
                             B     1144 	DEFB	00001000B
0000032C 08                  B+    1144 	DB P1
                             B     1145 	DEFB	00001000B
0000032D 08                  B+    1145 	DB P1
                             B     1146 	DEFB	00111110B
0000032E 3E                  B+    1146 	DB P1
                             B     1147 
                             B     1148 ; 04Ah - Character: 'J'			CHR0h(74)
                             B     1149 
                             B     1150 	DEFB	00000010B
0000032F 02                  B+    1150 	DB P1
                             B     1151 	DEFB	00000010B
00000330 02                  B+    1151 	DB P1
                             B     1152 	DEFB	00000010B
00000331 02                  B+    1152 	DB P1
                             B     1153 	DEFB	01000010B
00000332 42                  B+    1153 	DB P1
                             B     1154 	DEFB	01000010B
00000333 42                  B+    1154 	DB P1
                             B     1155 	DEFB	00111100B
00000334 3C                  B+    1155 	DB P1
                             B     1156 
                             B     1157 ; 04Bh - Character: 'K'			CHR0h(75)
                             B     1158 
                             B     1159 	DEFB	01000100B
00000335 44                  B+    1159 	DB P1
                             B     1160 	DEFB	01001000B
00000336 48                  B+    1160 	DB P1
                             B     1161 	DEFB	01110000B
00000337 70                  B+    1161 	DB P1
                             B     1162 	DEFB	01001000B
00000338 48                  B+    1162 	DB P1
                             B     1163 	DEFB	01000100B
00000339 44                  B+    1163 	DB P1
                             B     1164 	DEFB	01000010B
0000033A 42                  B+    1164 	DB P1
                             B     1165 
                             B     1166 ; 04Ch - Character: 'L'			CHR0h(76)
                             B     1167 
                             B     1168 	DEFB	01000000B
0000033B 40                  B+    1168 	DB P1
                             B     1169 	DEFB	01000000B
0000033C 40                  B+    1169 	DB P1
                             B     1170 	DEFB	01000000B
0000033D 40                  B+    1170 	DB P1
                             B     1171 	DEFB	01000000B
0000033E 40                  B+    1171 	DB P1
                             B     1172 	DEFB	01000000B
0000033F 40                  B+    1172 	DB P1
                             B     1173 	DEFB	01111110B
00000340 7E                  B+    1173 	DB P1
                             B     1174 
                             B     1175 ; 04Dh - Character: 'M'			CHR0h(77)
                             B     1176 
                             B     1177 	DEFB	01000010B
00000341 42                  B+    1177 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   31


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1178 	DEFB	01100110B
00000342 66                  B+    1178 	DB P1
                             B     1179 	DEFB	01011010B
00000343 5A                  B+    1179 	DB P1
                             B     1180 	DEFB	01000010B
00000344 42                  B+    1180 	DB P1
                             B     1181 	DEFB	01000010B
00000345 42                  B+    1181 	DB P1
                             B     1182 	DEFB	01000010B
00000346 42                  B+    1182 	DB P1
                             B     1183 
                             B     1184 ; 04Eh - Character: 'N'			CHR0h(78)
                             B     1185 
                             B     1186 	DEFB	01000010B
00000347 42                  B+    1186 	DB P1
                             B     1187 	DEFB	01100010B
00000348 62                  B+    1187 	DB P1
                             B     1188 	DEFB	01010010B
00000349 52                  B+    1188 	DB P1
                             B     1189 	DEFB	01001010B
0000034A 4A                  B+    1189 	DB P1
                             B     1190 	DEFB	01000110B
0000034B 46                  B+    1190 	DB P1
                             B     1191 	DEFB	01000010B
0000034C 42                  B+    1191 	DB P1
                             B     1192 
                             B     1193 ; 04Fh - Character: 'O'			CHR0h(79)
                             B     1194 
                             B     1195 	DEFB	00111100B
0000034D 3C                  B+    1195 	DB P1
                             B     1196 	DEFB	01000010B
0000034E 42                  B+    1196 	DB P1
                             B     1197 	DEFB	01000010B
0000034F 42                  B+    1197 	DB P1
                             B     1198 	DEFB	01000010B
00000350 42                  B+    1198 	DB P1
                             B     1199 	DEFB	01000010B
00000351 42                  B+    1199 	DB P1
                             B     1200 	DEFB	00111100B
00000352 3C                  B+    1200 	DB P1
                             B     1201 
                             B     1202 ; 050h - Character: 'P'			CHR0h(80)
                             B     1203 
                             B     1204 	DEFB	01111100B
00000353 7C                  B+    1204 	DB P1
                             B     1205 	DEFB	01000010B
00000354 42                  B+    1205 	DB P1
                             B     1206 	DEFB	01000010B
00000355 42                  B+    1206 	DB P1
                             B     1207 	DEFB	01111100B
00000356 7C                  B+    1207 	DB P1
                             B     1208 	DEFB	01000000B
00000357 40                  B+    1208 	DB P1
                             B     1209 	DEFB	01000000B
00000358 40                  B+    1209 	DB P1
                             B     1210 
                             B     1211 ; 051h - Character: 'Q'			CHR0h(81)
                             B     1212 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   32


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1213 	DEFB	00111100B
00000359 3C                  B+    1213 	DB P1
                             B     1214 	DEFB	01000010B
0000035A 42                  B+    1214 	DB P1
                             B     1215 	DEFB	01000010B
0000035B 42                  B+    1215 	DB P1
                             B     1216 	DEFB	01010010B
0000035C 52                  B+    1216 	DB P1
                             B     1217 	DEFB	01001010B
0000035D 4A                  B+    1217 	DB P1
                             B     1218 	DEFB	00111100B
0000035E 3C                  B+    1218 	DB P1
                             B     1219 
                             B     1220 ; 052h - Character: 'R'			CHR0h(82)
                             B     1221 
                             B     1222 	DEFB	01111100B
0000035F 7C                  B+    1222 	DB P1
                             B     1223 	DEFB	01000010B
00000360 42                  B+    1223 	DB P1
                             B     1224 	DEFB	01000010B
00000361 42                  B+    1224 	DB P1
                             B     1225 	DEFB	01111100B
00000362 7C                  B+    1225 	DB P1
                             B     1226 	DEFB	01000100B
00000363 44                  B+    1226 	DB P1
                             B     1227 	DEFB	01000010B
00000364 42                  B+    1227 	DB P1
                             B     1228 
                             B     1229 ; 053h - Character: 'S'			CHR0h(83)
                             B     1230 
                             B     1231 	DEFB	00111100B
00000365 3C                  B+    1231 	DB P1
                             B     1232 	DEFB	01000000B
00000366 40                  B+    1232 	DB P1
                             B     1233 	DEFB	00111100B
00000367 3C                  B+    1233 	DB P1
                             B     1234 	DEFB	00000010B
00000368 02                  B+    1234 	DB P1
                             B     1235 	DEFB	01000010B
00000369 42                  B+    1235 	DB P1
                             B     1236 	DEFB	00111100B
0000036A 3C                  B+    1236 	DB P1
                             B     1237 
                             B     1238 ; 054h - Character: 'T'			CHR0h(84)
                             B     1239 
                             B     1240 	DEFB	11111110B
0000036B FE                  B+    1240 	DB P1
                             B     1241 	DEFB	00010000B
0000036C 10                  B+    1241 	DB P1
                             B     1242 	DEFB	00010000B
0000036D 10                  B+    1242 	DB P1
                             B     1243 	DEFB	00010000B
0000036E 10                  B+    1243 	DB P1
                             B     1244 	DEFB	00010000B
0000036F 10                  B+    1244 	DB P1
                             B     1245 	DEFB	00010000B
00000370 10                  B+    1245 	DB P1
                             B     1246 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   33


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1247 ; 055h - Character: 'U'			CHR0h(85)
                             B     1248 
                             B     1249 	DEFB	01000010B
00000371 42                  B+    1249 	DB P1
                             B     1250 	DEFB	01000010B
00000372 42                  B+    1250 	DB P1
                             B     1251 	DEFB	01000010B
00000373 42                  B+    1251 	DB P1
                             B     1252 	DEFB	01000010B
00000374 42                  B+    1252 	DB P1
                             B     1253 	DEFB	01000010B
00000375 42                  B+    1253 	DB P1
                             B     1254 	DEFB	00111110B
00000376 3E                  B+    1254 	DB P1
                             B     1255 
                             B     1256 ; 056h - Character: 'V'			CHR0h(86)
                             B     1257 
                             B     1258 	DEFB	01000010B
00000377 42                  B+    1258 	DB P1
                             B     1259 	DEFB	01000010B
00000378 42                  B+    1259 	DB P1
                             B     1260 	DEFB	01000010B
00000379 42                  B+    1260 	DB P1
                             B     1261 	DEFB	01000010B
0000037A 42                  B+    1261 	DB P1
                             B     1262 	DEFB	00100100B
0000037B 24                  B+    1262 	DB P1
                             B     1263 	DEFB	00011000B
0000037C 18                  B+    1263 	DB P1
                             B     1264 
                             B     1265 ; 057h - Character: 'W'			CHR0h(87)
                             B     1266 
                             B     1267 	DEFB	01000010B
0000037D 42                  B+    1267 	DB P1
                             B     1268 	DEFB	01000010B
0000037E 42                  B+    1268 	DB P1
                             B     1269 	DEFB	01000010B
0000037F 42                  B+    1269 	DB P1
                             B     1270 	DEFB	01000010B
00000380 42                  B+    1270 	DB P1
                             B     1271 	DEFB	01011010B
00000381 5A                  B+    1271 	DB P1
                             B     1272 	DEFB	00100100B
00000382 24                  B+    1272 	DB P1
                             B     1273 
                             B     1274 ; 058h - Character: 'X'			CHR0h(88)
                             B     1275 
                             B     1276 	DEFB	01000010B
00000383 42                  B+    1276 	DB P1
                             B     1277 	DEFB	00100100B
00000384 24                  B+    1277 	DB P1
                             B     1278 	DEFB	00011000B
00000385 18                  B+    1278 	DB P1
                             B     1279 	DEFB	00011000B
00000386 18                  B+    1279 	DB P1
                             B     1280 	DEFB	00100100B
00000387 24                  B+    1280 	DB P1
                             B     1281 	DEFB	01000010B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   34


Ace3NOKB.asm

Location Object              Type  Line Source
00000388 42                  B+    1281 	DB P1
                             B     1282 
                             B     1283 ; 059h - Character: 'Y'			CHR0h(89)
                             B     1284 
                             B     1285 	DEFB	10000010B
00000389 82                  B+    1285 	DB P1
                             B     1286 	DEFB	01000100B
0000038A 44                  B+    1286 	DB P1
                             B     1287 	DEFB	00101000B
0000038B 28                  B+    1287 	DB P1
                             B     1288 	DEFB	00010000B
0000038C 10                  B+    1288 	DB P1
                             B     1289 	DEFB	00010000B
0000038D 10                  B+    1289 	DB P1
                             B     1290 	DEFB	00010000B
0000038E 10                  B+    1290 	DB P1
                             B     1291 
                             B     1292 ; 05Ah - Character: 'Z'			CHR0h(90)
                             B     1293 
                             B     1294 	DEFB	01111110B
0000038F 7E                  B+    1294 	DB P1
                             B     1295 	DEFB	00000100B
00000390 04                  B+    1295 	DB P1
                             B     1296 	DEFB	00001000B
00000391 08                  B+    1296 	DB P1
                             B     1297 	DEFB	00010000B
00000392 10                  B+    1297 	DB P1
                             B     1298 	DEFB	00100000B
00000393 20                  B+    1298 	DB P1
                             B     1299 	DEFB	01111110B
00000394 7E                  B+    1299 	DB P1
                             B     1300 
                             B     1301 ; 05Bh - Character: '['			CHR0h(91)
                             B     1302 
                             B     1303 	DEFB	00001110B
00000395 0E                  B+    1303 	DB P1
                             B     1304 	DEFB	00001000B
00000396 08                  B+    1304 	DB P1
                             B     1305 	DEFB	00001000B
00000397 08                  B+    1305 	DB P1
                             B     1306 	DEFB	00001000B
00000398 08                  B+    1306 	DB P1
                             B     1307 	DEFB	00001000B
00000399 08                  B+    1307 	DB P1
                             B     1308 	DEFB	00001110B
0000039A 0E                  B+    1308 	DB P1
                             B     1309 
                             B     1310 ; 05Ch - Character: '\'			CHR0h(92)
                             B     1311 
                             B     1312 	DEFB	00000000B
0000039B 00                  B+    1312 	DB P1
                             B     1313 	DEFB	01000000B
0000039C 40                  B+    1313 	DB P1
                             B     1314 	DEFB	00100000B
0000039D 20                  B+    1314 	DB P1
                             B     1315 	DEFB	00010000B
0000039E 10                  B+    1315 	DB P1
                             B     1316 	DEFB	00001000B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   35


Ace3NOKB.asm

Location Object              Type  Line Source
0000039F 08                  B+    1316 	DB P1
                             B     1317 	DEFB	00000100B
000003A0 04                  B+    1317 	DB P1
                             B     1318 
                             B     1319 ; 05Dh - Character: ']'			CHR0h(93)
                             B     1320 
                             B     1321 	DEFB	01110000B
000003A1 70                  B+    1321 	DB P1
                             B     1322 	DEFB	00010000B
000003A2 10                  B+    1322 	DB P1
                             B     1323 	DEFB	00010000B
000003A3 10                  B+    1323 	DB P1
                             B     1324 	DEFB	00010000B
000003A4 10                  B+    1324 	DB P1
                             B     1325 	DEFB	00010000B
000003A5 10                  B+    1325 	DB P1
                             B     1326 	DEFB	01110000B
000003A6 70                  B+    1326 	DB P1
                             B     1327 
                             B     1328 ; 05Eh - Character: '^'			CHR0h(94)
                             B     1329 
                             B     1330 	DEFB	00010000B
000003A7 10                  B+    1330 	DB P1
                             B     1331 	DEFB	00111000B
000003A8 38                  B+    1331 	DB P1
                             B     1332 	DEFB	01010100B
000003A9 54                  B+    1332 	DB P1
                             B     1333 	DEFB	00010000B
000003AA 10                  B+    1333 	DB P1
                             B     1334 	DEFB	00010000B
000003AB 10                  B+    1334 	DB P1
                             B     1335 	DEFB	00010000B
000003AC 10                  B+    1335 	DB P1
                             B     1336 
                             B     1337 ; 05Fh - Character: '_'			CHR0h(95)
                             B     1338 
                             B     1339 	DEFB	00000000B
000003AD 00                  B+    1339 	DB P1
                             B     1340 	DEFB	00000000B
000003AE 00                  B+    1340 	DB P1
                             B     1341 	DEFB	00000000B
000003AF 00                  B+    1341 	DB P1
                             B     1342 	DEFB	00000000B
000003B0 00                  B+    1342 	DB P1
                             B     1343 	DEFB	00000000B
000003B1 00                  B+    1343 	DB P1
                             B     1344 	DEFB	00000000B
000003B2 00                  B+    1344 	DB P1
                             B     1345 	DEFB	11111111B
000003B3 FF                  B+    1345 	DB P1
                             B     1346 
                             B     1347 ; 060h - Character:  ï¿½			CHR0h(96)
                             B     1348 
                             B     1349 	DEFB	00011100B
000003B4 1C                  B+    1349 	DB P1
                             B     1350 	DEFB	00100010B
000003B5 22                  B+    1350 	DB P1
                             B     1351 	DEFB	01111000B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   36


Ace3NOKB.asm

Location Object              Type  Line Source
000003B6 78                  B+    1351 	DB P1
                             B     1352 	DEFB	00100000B
000003B7 20                  B+    1352 	DB P1
                             B     1353 	DEFB	00100000B
000003B8 20                  B+    1353 	DB P1
                             B     1354 	DEFB	01111110B
000003B9 7E                  B+    1354 	DB P1
                             B     1355 	DEFB	00000000B
000003BA 00                  B+    1355 	DB P1
                             B     1356 
                             B     1357 ; 061h - Character: 'a'			CHR0h(97)
                             B     1358 
                             B     1359 	DEFB	00000000B
000003BB 00                  B+    1359 	DB P1
                             B     1360 	DEFB	00111000B
000003BC 38                  B+    1360 	DB P1
                             B     1361 	DEFB	00000100B
000003BD 04                  B+    1361 	DB P1
                             B     1362 	DEFB	00111100B
000003BE 3C                  B+    1362 	DB P1
                             B     1363 	DEFB	01000100B
000003BF 44                  B+    1363 	DB P1
                             B     1364 	DEFB	00111110B
000003C0 3E                  B+    1364 	DB P1
                             B     1365 	DEFB	00000000B
000003C1 00                  B+    1365 	DB P1
                             B     1366 
                             B     1367 ; 062h - Character: 'b'			CHR0h(98)
                             B     1368 
                             B     1369 	DEFB	00100000B
000003C2 20                  B+    1369 	DB P1
                             B     1370 	DEFB	00100000B
000003C3 20                  B+    1370 	DB P1
                             B     1371 	DEFB	00111100B
000003C4 3C                  B+    1371 	DB P1
                             B     1372 	DEFB	00100010B
000003C5 22                  B+    1372 	DB P1
                             B     1373 	DEFB	00100010B
000003C6 22                  B+    1373 	DB P1
                             B     1374 	DEFB	00111100B
000003C7 3C                  B+    1374 	DB P1
                             B     1375 	DEFB	00000000B
000003C8 00                  B+    1375 	DB P1
                             B     1376 
                             B     1377 ; 063h - Character: 'c'			CHR0h(99)
                             B     1378 
                             B     1379 	DEFB	00000000B
000003C9 00                  B+    1379 	DB P1
                             B     1380 	DEFB	00011100B
000003CA 1C                  B+    1380 	DB P1
                             B     1381 	DEFB	00100000B
000003CB 20                  B+    1381 	DB P1
                             B     1382 	DEFB	00100000B
000003CC 20                  B+    1382 	DB P1
                             B     1383 	DEFB	00100000B
000003CD 20                  B+    1383 	DB P1
                             B     1384 	DEFB	00011100B
000003CE 1C                  B+    1384 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   37


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1385 	DEFB	00000000B
000003CF 00                  B+    1385 	DB P1
                             B     1386 
                             B     1387 ; 064h - Character: 'd'			CHR0h(100)
                             B     1388 
                             B     1389 	DEFB	00000100B
000003D0 04                  B+    1389 	DB P1
                             B     1390 	DEFB	00000100B
000003D1 04                  B+    1390 	DB P1
                             B     1391 	DEFB	00111100B
000003D2 3C                  B+    1391 	DB P1
                             B     1392 	DEFB	01000100B
000003D3 44                  B+    1392 	DB P1
                             B     1393 	DEFB	01000100B
000003D4 44                  B+    1393 	DB P1
                             B     1394 	DEFB	00111110B
000003D5 3E                  B+    1394 	DB P1
                             B     1395 	DEFB	00000000B
000003D6 00                  B+    1395 	DB P1
                             B     1396 
                             B     1397 ; 065h - Character: 'e'			CHR0h(101)
                             B     1398 
                             B     1399 	DEFB	00000000B
000003D7 00                  B+    1399 	DB P1
                             B     1400 	DEFB	00111000B
000003D8 38                  B+    1400 	DB P1
                             B     1401 	DEFB	01000100B
000003D9 44                  B+    1401 	DB P1
                             B     1402 	DEFB	01111000B
000003DA 78                  B+    1402 	DB P1
                             B     1403 	DEFB	01000000B
000003DB 40                  B+    1403 	DB P1
                             B     1404 	DEFB	00111100B
000003DC 3C                  B+    1404 	DB P1
                             B     1405 	DEFB	00000000B
000003DD 00                  B+    1405 	DB P1
                             B     1406 
                             B     1407 ; 066h - Character: 'f'			CHR0h(102)
                             B     1408 
                             B     1409 	DEFB	00001100B
000003DE 0C                  B+    1409 	DB P1
                             B     1410 	DEFB	00010000B
000003DF 10                  B+    1410 	DB P1
                             B     1411 	DEFB	00011000B
000003E0 18                  B+    1411 	DB P1
                             B     1412 	DEFB	00010000B
000003E1 10                  B+    1412 	DB P1
                             B     1413 	DEFB	00010000B
000003E2 10                  B+    1413 	DB P1
                             B     1414 	DEFB	00010000B
000003E3 10                  B+    1414 	DB P1
                             B     1415 	DEFB	00000000B
000003E4 00                  B+    1415 	DB P1
                             B     1416 
                             B     1417 ; 067h - Character: 'g'			CHR0h(103)
                             B     1418 
                             B     1419 	DEFB	00000000B
000003E5 00                  B+    1419 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   38


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1420 	DEFB	00111100B
000003E6 3C                  B+    1420 	DB P1
                             B     1421 	DEFB	01000100B
000003E7 44                  B+    1421 	DB P1
                             B     1422 	DEFB	01000100B
000003E8 44                  B+    1422 	DB P1
                             B     1423 	DEFB	00111100B
000003E9 3C                  B+    1423 	DB P1
                             B     1424 	DEFB	00000100B
000003EA 04                  B+    1424 	DB P1
                             B     1425 	DEFB	00111000B
000003EB 38                  B+    1425 	DB P1
                             B     1426 
                             B     1427 ; 068h - Character: 'h'			CHR0h(104)
                             B     1428 
                             B     1429 	DEFB	01000000B
000003EC 40                  B+    1429 	DB P1
                             B     1430 	DEFB	01000000B
000003ED 40                  B+    1430 	DB P1
                             B     1431 	DEFB	01111000B
000003EE 78                  B+    1431 	DB P1
                             B     1432 	DEFB	01000100B
000003EF 44                  B+    1432 	DB P1
                             B     1433 	DEFB	01000100B
000003F0 44                  B+    1433 	DB P1
                             B     1434 	DEFB	01000100B
000003F1 44                  B+    1434 	DB P1
                             B     1435 	DEFB	00000000B
000003F2 00                  B+    1435 	DB P1
                             B     1436 
                             B     1437 ; 069h - Character: 'i'			CHR0h(105)
                             B     1438 
                             B     1439 	DEFB	00010000B
000003F3 10                  B+    1439 	DB P1
                             B     1440 	DEFB	00000000B
000003F4 00                  B+    1440 	DB P1
                             B     1441 	DEFB	00110000B
000003F5 30                  B+    1441 	DB P1
                             B     1442 	DEFB	00010000B
000003F6 10                  B+    1442 	DB P1
                             B     1443 	DEFB	00010000B
000003F7 10                  B+    1443 	DB P1
                             B     1444 	DEFB	00111000B
000003F8 38                  B+    1444 	DB P1
                             B     1445 	DEFB	00000000B
000003F9 00                  B+    1445 	DB P1
                             B     1446 
                             B     1447 ; 06Ah - Character: 'j'			CHR0h(106)
                             B     1448 
                             B     1449 	DEFB	00000100B
000003FA 04                  B+    1449 	DB P1
                             B     1450 	DEFB	00000000B
000003FB 00                  B+    1450 	DB P1
                             B     1451 	DEFB	00000100B
000003FC 04                  B+    1451 	DB P1
                             B     1452 	DEFB	00000100B
000003FD 04                  B+    1452 	DB P1
                             B     1453 	DEFB	00000100B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   39


Ace3NOKB.asm

Location Object              Type  Line Source
000003FE 04                  B+    1453 	DB P1
                             B     1454 	DEFB	00100100B
000003FF 24                  B+    1454 	DB P1
                             B     1455 	DEFB	00011000B
00000400 18                  B+    1455 	DB P1
                             B     1456 
                             B     1457 ; 06Bh - Character: 'k'			CHR0h(107)
                             B     1458 
                             B     1459 	DEFB	00100000B
00000401 20                  B+    1459 	DB P1
                             B     1460 	DEFB	00101000B
00000402 28                  B+    1460 	DB P1
                             B     1461 	DEFB	00110000B
00000403 30                  B+    1461 	DB P1
                             B     1462 	DEFB	00110000B
00000404 30                  B+    1462 	DB P1
                             B     1463 	DEFB	00101000B
00000405 28                  B+    1463 	DB P1
                             B     1464 	DEFB	00100100B
00000406 24                  B+    1464 	DB P1
                             B     1465 	DEFB	00000000B
00000407 00                  B+    1465 	DB P1
                             B     1466 
                             B     1467 ; 06Ch - Character: 'l'			CHR0h(108)
                             B     1468 
                             B     1469 	DEFB	00010000B
00000408 10                  B+    1469 	DB P1
                             B     1470 	DEFB	00010000B
00000409 10                  B+    1470 	DB P1
                             B     1471 	DEFB	00010000B
0000040A 10                  B+    1471 	DB P1
                             B     1472 	DEFB	00010000B
0000040B 10                  B+    1472 	DB P1
                             B     1473 	DEFB	00010000B
0000040C 10                  B+    1473 	DB P1
                             B     1474 	DEFB	00001100B
0000040D 0C                  B+    1474 	DB P1
                             B     1475 	DEFB	00000000B
0000040E 00                  B+    1475 	DB P1
                             B     1476 
                             B     1477 ; 06Dh - Character: 'm'			CHR0h(109)
                             B     1478 
                             B     1479 	DEFB	00000000B
0000040F 00                  B+    1479 	DB P1
                             B     1480 	DEFB	01101000B
00000410 68                  B+    1480 	DB P1
                             B     1481 	DEFB	01010100B
00000411 54                  B+    1481 	DB P1
                             B     1482 	DEFB	01010100B
00000412 54                  B+    1482 	DB P1
                             B     1483 	DEFB	01010100B
00000413 54                  B+    1483 	DB P1
                             B     1484 	DEFB	01010100B
00000414 54                  B+    1484 	DB P1
                             B     1485 	DEFB	00000000B
00000415 00                  B+    1485 	DB P1
                             B     1486 
                             B     1487 ; 06Eh - Character: 'n'			CHR0h(110)
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   40


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1488 
                             B     1489 	DEFB	00000000B
00000416 00                  B+    1489 	DB P1
                             B     1490 	DEFB	01111000B
00000417 78                  B+    1490 	DB P1
                             B     1491 	DEFB	01000100B
00000418 44                  B+    1491 	DB P1
                             B     1492 	DEFB	01000100B
00000419 44                  B+    1492 	DB P1
                             B     1493 	DEFB	01000100B
0000041A 44                  B+    1493 	DB P1
                             B     1494 	DEFB	01000100B
0000041B 44                  B+    1494 	DB P1
                             B     1495 	DEFB	00000000B
0000041C 00                  B+    1495 	DB P1
                             B     1496 
                             B     1497 ; 06Fh - Character: 'o'			CHR0h(111)
                             B     1498 
                             B     1499 	DEFB	00000000B
0000041D 00                  B+    1499 	DB P1
                             B     1500 	DEFB	00111000B
0000041E 38                  B+    1500 	DB P1
                             B     1501 	DEFB	01000100B
0000041F 44                  B+    1501 	DB P1
                             B     1502 	DEFB	01000100B
00000420 44                  B+    1502 	DB P1
                             B     1503 	DEFB	01000100B
00000421 44                  B+    1503 	DB P1
                             B     1504 	DEFB	00111000B
00000422 38                  B+    1504 	DB P1
                             B     1505 	DEFB	00000000B
00000423 00                  B+    1505 	DB P1
                             B     1506 
                             B     1507 ; 070h - Character: 'p'			CHR0h(112)
                             B     1508 
                             B     1509 	DEFB	00000000B
00000424 00                  B+    1509 	DB P1
                             B     1510 	DEFB	01111000B
00000425 78                  B+    1510 	DB P1
                             B     1511 	DEFB	01000100B
00000426 44                  B+    1511 	DB P1
                             B     1512 	DEFB	01000100B
00000427 44                  B+    1512 	DB P1
                             B     1513 	DEFB	01111000B
00000428 78                  B+    1513 	DB P1
                             B     1514 	DEFB	01000000B
00000429 40                  B+    1514 	DB P1
                             B     1515 	DEFB	01000000B
0000042A 40                  B+    1515 	DB P1
                             B     1516 
                             B     1517 ; 071h - Character: 'q'			CHR0h(113)
                             B     1518 
                             B     1519 	DEFB	00000000B
0000042B 00                  B+    1519 	DB P1
                             B     1520 	DEFB	00111100B
0000042C 3C                  B+    1520 	DB P1
                             B     1521 	DEFB	01000100B
0000042D 44                  B+    1521 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   41


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1522 	DEFB	01000100B
0000042E 44                  B+    1522 	DB P1
                             B     1523 	DEFB	00111100B
0000042F 3C                  B+    1523 	DB P1
                             B     1524 	DEFB	00000100B
00000430 04                  B+    1524 	DB P1
                             B     1525 	DEFB	00000110B
00000431 06                  B+    1525 	DB P1
                             B     1526 
                             B     1527 ; 072h - Character: 'r'			CHR0h(114)
                             B     1528 
                             B     1529 	DEFB	00000000B
00000432 00                  B+    1529 	DB P1
                             B     1530 	DEFB	00011100B
00000433 1C                  B+    1530 	DB P1
                             B     1531 	DEFB	00100000B
00000434 20                  B+    1531 	DB P1
                             B     1532 	DEFB	00100000B
00000435 20                  B+    1532 	DB P1
                             B     1533 	DEFB	00100000B
00000436 20                  B+    1533 	DB P1
                             B     1534 	DEFB	00100000B
00000437 20                  B+    1534 	DB P1
                             B     1535 	DEFB	00000000B
00000438 00                  B+    1535 	DB P1
                             B     1536 
                             B     1537 ; 073h - Character: 's'			CHR0h(115)
                             B     1538 
                             B     1539 	DEFB	00000000B
00000439 00                  B+    1539 	DB P1
                             B     1540 	DEFB	00111000B
0000043A 38                  B+    1540 	DB P1
                             B     1541 	DEFB	01000000B
0000043B 40                  B+    1541 	DB P1
                             B     1542 	DEFB	00111000B
0000043C 38                  B+    1542 	DB P1
                             B     1543 	DEFB	00000100B
0000043D 04                  B+    1543 	DB P1
                             B     1544 	DEFB	01111000B
0000043E 78                  B+    1544 	DB P1
                             B     1545 	DEFB	00000000B
0000043F 00                  B+    1545 	DB P1
                             B     1546 
                             B     1547 ; 074h - Character: 't'			CHR0h(116)
                             B     1548 
                             B     1549 	DEFB	00010000B
00000440 10                  B+    1549 	DB P1
                             B     1550 	DEFB	00111000B
00000441 38                  B+    1550 	DB P1
                             B     1551 	DEFB	00010000B
00000442 10                  B+    1551 	DB P1
                             B     1552 	DEFB	00010000B
00000443 10                  B+    1552 	DB P1
                             B     1553 	DEFB	00010000B
00000444 10                  B+    1553 	DB P1
                             B     1554 	DEFB	00001100B
00000445 0C                  B+    1554 	DB P1
                             B     1555 	DEFB	00000000B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   42


Ace3NOKB.asm

Location Object              Type  Line Source
00000446 00                  B+    1555 	DB P1
                             B     1556 
                             B     1557 ; 075h - Character: 'u'			CHR0h(117)
                             B     1558 
                             B     1559 	DEFB	00000000B
00000447 00                  B+    1559 	DB P1
                             B     1560 	DEFB	01000100B
00000448 44                  B+    1560 	DB P1
                             B     1561 	DEFB	01000100B
00000449 44                  B+    1561 	DB P1
                             B     1562 	DEFB	01000100B
0000044A 44                  B+    1562 	DB P1
                             B     1563 	DEFB	01000100B
0000044B 44                  B+    1563 	DB P1
                             B     1564 	DEFB	00111100B
0000044C 3C                  B+    1564 	DB P1
                             B     1565 	DEFB	00000000B
0000044D 00                  B+    1565 	DB P1
                             B     1566 
                             B     1567 ; 076h - Character: 'v'			CHR0h(118)
                             B     1568 
                             B     1569 	DEFB	00000000B
0000044E 00                  B+    1569 	DB P1
                             B     1570 	DEFB	01000100B
0000044F 44                  B+    1570 	DB P1
                             B     1571 	DEFB	01000100B
00000450 44                  B+    1571 	DB P1
                             B     1572 	DEFB	00101000B
00000451 28                  B+    1572 	DB P1
                             B     1573 	DEFB	00101000B
00000452 28                  B+    1573 	DB P1
                             B     1574 	DEFB	00010000B
00000453 10                  B+    1574 	DB P1
                             B     1575 	DEFB	00000000B
00000454 00                  B+    1575 	DB P1
                             B     1576 
                             B     1577 ; 077h - Character: 'w'			CHR0h(119)
                             B     1578 
                             B     1579 	DEFB	00000000B
00000455 00                  B+    1579 	DB P1
                             B     1580 	DEFB	01000100B
00000456 44                  B+    1580 	DB P1
                             B     1581 	DEFB	01010100B
00000457 54                  B+    1581 	DB P1
                             B     1582 	DEFB	01010100B
00000458 54                  B+    1582 	DB P1
                             B     1583 	DEFB	01010100B
00000459 54                  B+    1583 	DB P1
                             B     1584 	DEFB	00101000B
0000045A 28                  B+    1584 	DB P1
                             B     1585 	DEFB	00000000B
0000045B 00                  B+    1585 	DB P1
                             B     1586 
                             B     1587 ; 078h - Character: 'x'			CHR0h(120)
                             B     1588 
                             B     1589 	DEFB	00000000B
0000045C 00                  B+    1589 	DB P1
                             B     1590 	DEFB	01000100B
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   43


Ace3NOKB.asm

Location Object              Type  Line Source
0000045D 44                  B+    1590 	DB P1
                             B     1591 	DEFB	00101000B
0000045E 28                  B+    1591 	DB P1
                             B     1592 	DEFB	00010000B
0000045F 10                  B+    1592 	DB P1
                             B     1593 	DEFB	00101000B
00000460 28                  B+    1593 	DB P1
                             B     1594 	DEFB	01000100B
00000461 44                  B+    1594 	DB P1
                             B     1595 	DEFB	00000000B
00000462 00                  B+    1595 	DB P1
                             B     1596 
                             B     1597 ; 079h - Character: 'y'			CHR0h(121)
                             B     1598 
                             B     1599 	DEFB	00000000B
00000463 00                  B+    1599 	DB P1
                             B     1600 	DEFB	01000100B
00000464 44                  B+    1600 	DB P1
                             B     1601 	DEFB	01000100B
00000465 44                  B+    1601 	DB P1
                             B     1602 	DEFB	01000100B
00000466 44                  B+    1602 	DB P1
                             B     1603 	DEFB	00111100B
00000467 3C                  B+    1603 	DB P1
                             B     1604 	DEFB	00000100B
00000468 04                  B+    1604 	DB P1
                             B     1605 	DEFB	00111000B
00000469 38                  B+    1605 	DB P1
                             B     1606 
                             B     1607 ; 07Ah - Character: 'z'			CHR0h(122)
                             B     1608 
                             B     1609 	DEFB	00000000B
0000046A 00                  B+    1609 	DB P1
                             B     1610 	DEFB	01111100B
0000046B 7C                  B+    1610 	DB P1
                             B     1611 	DEFB	00001000B
0000046C 08                  B+    1611 	DB P1
                             B     1612 	DEFB	00010000B
0000046D 10                  B+    1612 	DB P1
                             B     1613 	DEFB	00100000B
0000046E 20                  B+    1613 	DB P1
                             B     1614 	DEFB	01111100B
0000046F 7C                  B+    1614 	DB P1
                             B     1615 	DEFB	00000000B
00000470 00                  B+    1615 	DB P1
                             B     1616 
                             B     1617 ; 07Bh - Character: '{'			CHR0h(123)
                             B     1618 
                             B     1619 	DEFB	00001110B
00000471 0E                  B+    1619 	DB P1
                             B     1620 	DEFB	00001000B
00000472 08                  B+    1620 	DB P1
                             B     1621 	DEFB	00110000B
00000473 30                  B+    1621 	DB P1
                             B     1622 	DEFB	00110000B
00000474 30                  B+    1622 	DB P1
                             B     1623 	DEFB	00001000B
00000475 08                  B+    1623 	DB P1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   44


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1624 	DEFB	00001110B
00000476 0E                  B+    1624 	DB P1
                             B     1625 	DEFB	00000000B
00000477 00                  B+    1625 	DB P1
                             B     1626 
                             B     1627 ; 07Ch - Character: '|'			CHR0h(124)
                             B     1628 
                             B     1629 	DEFB	00001000B
00000478 08                  B+    1629 	DB P1
                             B     1630 	DEFB	00001000B
00000479 08                  B+    1630 	DB P1
                             B     1631 	DEFB	00001000B
0000047A 08                  B+    1631 	DB P1
                             B     1632 	DEFB	00001000B
0000047B 08                  B+    1632 	DB P1
                             B     1633 	DEFB	00001000B
0000047C 08                  B+    1633 	DB P1
                             B     1634 	DEFB	00001000B
0000047D 08                  B+    1634 	DB P1
                             B     1635 	DEFB	00000000B
0000047E 00                  B+    1635 	DB P1
                             B     1636 
                             B     1637 ; 07Dh - Character: '}'			CHR0h(125)
                             B     1638 
                             B     1639 	DEFB	01110000B
0000047F 70                  B+    1639 	DB P1
                             B     1640 	DEFB	00010000B
00000480 10                  B+    1640 	DB P1
                             B     1641 	DEFB	00001100B
00000481 0C                  B+    1641 	DB P1
                             B     1642 	DEFB	00001100B
00000482 0C                  B+    1642 	DB P1
                             B     1643 	DEFB	00010000B
00000483 10                  B+    1643 	DB P1
                             B     1644 	DEFB	01110000B
00000484 70                  B+    1644 	DB P1
                             B     1645 	DEFB	00000000B
00000485 00                  B+    1645 	DB P1
                             B     1646 
                             B     1647 ; 07Eh - Character: '~'			CHR0h(126)
                             B     1648 
                             B     1649 	DEFB	00110010B
00000486 32                  B+    1649 	DB P1
                             B     1650 	DEFB	01001100B
00000487 4C                  B+    1650 	DB P1
                             B     1651 	DEFB	00000000B
00000488 00                  B+    1651 	DB P1
                             B     1652 	DEFB	00000000B
00000489 00                  B+    1652 	DB P1
                             B     1653 	DEFB	00000000B
0000048A 00                  B+    1653 	DB P1
                             B     1654 	DEFB	00000000B
0000048B 00                  B+    1654 	DB P1
                             B     1655 	DEFB	00000000B
0000048C 00                  B+    1655 	DB P1
                             B     1656 
                             B     1657 ; 07Fh - Character:  ï¿½			CHR0h(127)
                             B     1658 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   45


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1659 	DEFB	00111100B
0000048D 3C                  B+    1659 	DB P1
                             B     1660 	DEFB	01000010B
0000048E 42                  B+    1660 	DB P1
                             B     1661 	DEFB	10011001B
0000048F 99                  B+    1661 	DB P1
                             B     1662 	DEFB	10100001B
00000490 A1                  B+    1662 	DB P1
                             B     1663 	DEFB	10100001B
00000491 A1                  B+    1663 	DB P1
                             B     1664 	DEFB	10011001B
00000492 99                  B+    1664 	DB P1
                             B     1665 	DEFB	01000010B
00000493 42                  B+    1665 	DB P1
                             B     1666 L1FFB:  DEFB	00111100B
00000494 3C                  B+    1666 	DB P1
                             B     1667 
                             B     1668 
                             B     1669 
                             B     1670 ; ---------------
                             B     1671 ; THE 'SPARE' ROM
                             B     1672 ; ---------------
                             B     1673 
                             B     1674 L1FFC:  DEFB	0FFh						; unused
00000495 FF                  B+    1674 	DB P1
                             B     1675 
                             B     1676 ; ----------
                             B     1677 ; THE 'LINK'
                             B     1678 ; ----------
                             B     1679 
                             B     1680 ; The FORTH word copied to RAM links back to L1FFF
                             B     1681 
                             B     1682 ;L1FFD:  DEFW	L1D58					; pointer to prev - UFLOAT
                             B     1683 L1FFF:  DEFB	000h					; length of dummy word zero
00000496 00                  B+    1683 	DB P1
                             B     1684 
                             B     1685 ;
                             B     1686 ;
                             B     1687 ;
                             B     1688 ; -----------------------------------------------------------------------------
                             B     1689 ;									---------
                             B     1690 ;									-------------------------------------------
                             B     1691 ; ------------						--------------------------------------------
                             B     1692 ; ACE KEYBOARD					---------
                             B     1693 ; ------------					---------
                             B     1694 ;
                             B     1695 ;+-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+
                             B     1696 ;|   ! | |   @ | |   # | |   0h | |   % | |   & | |   ' | |   ( | |   ) | |   _ |
                             B     1697 ;| 1 []| | 2 []| | 3 []| | 4 []| | 5 []| | 6 []| | 7 []| | 8   | | 9   | | 0 []|
                             B     1698 ;+-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+
                             B     1699 ; DELETE   CAPS			INV	<=		^		v		=>  GRAPHIC  DELETE
                             B     1700 ;  LINE	LOCK			VIDEO
                             B     1701 ;+-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+
                             B     1702 ;|		| |		| |		| |   < | |   > | |   [ | |   ] | |   ï¿½ | |   ; | |   " |
                             B     1703 ;| Q   | | W   | | E   | | R   | | T   | | Y   | | U   | | I   | | O   | | P   |
                             B     1704 ;+-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+
                             B     1705 ;
                             B     1706 ;+-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   46


Ace3NOKB.asm

Location Object              Type  Line Source
                             B     1707 ;|   ~ | |   | | |   \ | |   { | |   } | |   ^ | |   - | |   + | |   = | |		|
                             B     1708 ;| A   | | S   | | D   | | F   | | G   | | H   | | J   | | K   | | L   | |ENTER|
                             B     1709 ;+-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+
                             B     1710 ;
                             B     1711 ;+-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+
                             B     1712 ;|		| |   : | |   ï¿½ | |   ? | |   / | |   * | |   , | |   . | | SYM | |		|
                             B     1713 ;|SHIFT| | Z   | | X   | | C   | | V   | | B   | | N   | | M   | |SHIFT| |SPACE|
                             B     1714 ;+-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+ +-----+
                             B     1715 ;
                             B     1716 ;
                             B     1717 ;						[] mosaic graphic			ï¿½  currency symbol
                             B     1718 ;
                             B     1719 ; -----------------------------------------------------------------------------
                             A        2     INCLUDE "ctc.asm"
                             B        1 	INCLUDE "iodefs.inc"
                             C        1 ;	CPU  Z80
                             C        2 
                             C        3 	.IFNDEF RAMSTARTLOC
                             C        4 
                             C        5 	.DEFINE ROM
                             C        6 	.SECTION ROM
                             C        7 	
                             C        8 
                             C        9 ;RAMSTARTLOC equ 03C00h
                             C       10 RAMSTARTLOC equ 04000h
                             C       11 
                             C       12 INTTABLEBASE	equ	01E00h
                             C       13 
                             C       14 
                             C       15 KIOBASE	equ	0FCh
                             C       16 
                             C       17 PIOIOBASE	equ	00B
                             C       18 CTCIOBASE	equ	01B
                             C       19 SIOIOBASE	equ	10B
                             C       20 PIAIOBASE	equ	11B
                             C       21 KIOIOBASE	equ	11B
                             C       22 
                             C       23 PIOPORTADATA	equ	00b
                             C       24 PIOPORTACMD		equ	01b
                             C       25 PIOPORTBDATA	equ	00b
                             C       26 PIOPORTBCMD		equ	01b
                             C       27 
                             C       28 CTCCHANNEL0		equ	00b
                             C       29 CTCCHANNEL1		equ	01b
                             C       30 CTCCHANNEL2		equ	10b
                             C       31 CTCCHANNEL3		equ	11b
                             C       32 
                             C       33 SIOPORTADATA	equ	00b
                             C       34 SIOPORTACMD		equ	01b
                             C       35 SIOPORTBDATA	equ	00b
                             C       36 SIOPORTBCMD		equ	01b
                             C       37 
                             C       38 PIAPORTCDATA	equ	00b
                             C       39 PIAPORTCCMD		equ	01b
                             C       40 
                             C       41 KIOCOMMANDA		equ	10b
                             C       42 KIOCOMMANDB		equ	11b
                             C       43 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   47


iodefs.inc

Location Object              Type  Line Source
                             C       44 MAKEPORT	MACRO	Name,Base,Device,Register
                             C       45 Name equ Base|(Device<<8)|(Register<<10)
                             C       46 	ENDMAC 
                             C       47 
                             C       48 
                             C       49 	MAKEPORT PIOADATA,KIOBASE,PIOIOBASE,PIOPORTADATA
                             C       50 	MAKEPORT PIOACMD,KIOBASE,PIOIOBASE,PIOPORTACMD
                             C       51 	MAKEPORT PIOBDATA,KIOBASE,PIOIOBASE,PIOPORTBDATA
                             C       52 	MAKEPORT PIOBCMD,KIOBASE,PIOIOBASE,PIOPORTBCMD
                             C       53 
                             C       54 	MAKEPORT CTCCH0,KIOBASE,CTCIOBASE,CTCCHANNEL0
                             C       55 	MAKEPORT CTCCH1,KIOBASE,CTCIOBASE,CTCCHANNEL1
                             C       56 	MAKEPORT CTCCH2,KIOBASE,CTCIOBASE,CTCCHANNEL2
                             C       57 	MAKEPORT CTCCH3,KIOBASE,CTCIOBASE,CTCCHANNEL3
                             C       58 
                             C       59 	MAKEPORT SIOADATA,KIOBASE,SIOIOBASE,SIOPORTADATA
                             C       60 	MAKEPORT SIOACMD,KIOBASE,SIOIOBASE,SIOPORTACMD
                             C       61 	MAKEPORT SIOBDATA,KIOBASE,SIOIOBASE,SIOPORTBDATA
                             C       62 	MAKEPORT SIOBCMD,KIOBASE,SIOIOBASE,SIOPORTBCMD
                             C       63 
                             C       64 	MAKEPORT PIOCDATA,KIOBASE,PIAIOBASE,PIAPORTCDATA
                             C       65 	MAKEPORT PIOCCMD,KIOBASE,PIAIOBASE,PIAPORTCCMD
                             C       66 
                             C       67 	MAKEPORT KIOCMDA,KIOBASE,KIOIOBASE,KIOCOMMANDA
                             C       68 	MAKEPORT KIOCMDB,KIOBASE,KIOIOBASE,KIOCOMMANDB
                             C       69 
                             C       70 	
                             C       71 WDTMT	equ	0F0h
                             C       72 WDTCR	equ	0F1h
                             C       73 
                             C       74 IPR		equ	0F4h
                             C       75 
                             C       76 SCRP	equ	0EEh
                             C       77 SCDP	equ	0EFh
                             C       78 
                             C       79 SERIALTXBUFFLEN	equ	020h	;must be power of 2
                             C       80 
                             C       81 DEFB MACRO P1
                             C       82 	DB P1
                             C       83 	ENDMAC
                             C       84 
                             C       85 DEFW MACRO P1
                             C       86 	DW P1
                             C       87 	ENDMAC
                             C       88 
                             C       89 DEFM MACRO P1
                             C       90 	DB P1
                             C       91 	ENDMAC
                             C       92 
                             C       93 
                             C       94 	.endif
                             B        2 
                             B        3 ;	.SECTION DEUCEROM
                             B        4 
                             B        5 	PUBLIC CTC0INT,CTC1INT,CTC2INT,CTC3INT,INIT_CTC
                             B        6 
                             B        7 ;	EXTERN IM1INTHANDLER,FRAMES,SIOASendChar
                             B        8 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   48


ctc.asm

Location Object              Type  Line Source
                   00000080  B        9 INTON	equ 10000000b
                   FFFFFF7F  B       10 INTOFF	equ ~INTON
                             B       11 
                   00000040  B       12 COUNTMODE	equ 01000000b
                   FFFFFFBF  B       13 TIMEMODE	equ ~COUNTMODE
                             B       14 
                   00000020  B       15 PRE256	equ 00100000b
                   FFFFFFDF  B       16 PRE16	equ ~PRE256
                             B       17 
                   00000010  B       18 RISING	equ 00010000b
                   FFFFFFEF  B       19 FALLING	equ ~RISING
                             B       20 
                   00000008  B       21 PULSESTARTS	equ 00001000b
                   FFFFFFF7  B       22 LOADSTARTS	equ ~PULSESTARTS
                             B       23 
                   00000004  B       24 TIMECONST	equ 00000100b
                   FFFFFFFB  B       25 NOTIMECONST	equ ~TIMECONST
                             B       26 
                   00000002  B       27 RESET		equ 00000010b
                   FFFFFFFD  B       28 CONSTINU	equ ~RESET
                             B       29 
                   00000001  B       30 CONTROL		equ 00000001b
                   FFFFFFFE  B       31 VCTOR		equ ~CONTROL
                             B       32 
                             B       33 
00000497                     B       34 INIT_CTC:
00000497 3E 10               B       35 	ld	A,0  | (2<<3) ;use int 2,3,4,5
00000499 01 FC 01            B       36 	ld	BC,CTCCH0
0000049C ED 79               B       37 	out	(BC),A
                             B       38 
0000049E 3E C9               B       39 	ld	A,11001001b
000004A0 01 FC 01            B       40 	ld	BC,CTCCH0
000004A3 ED 79               B       41 	out	(BC),A
                             B       42 
                             B       43 
000004A5 3E C9               B       44 	ld	A,11001001b
000004A7 01 FC 05            B       45 	ld	BC,CTCCH1
000004AA ED 79               B       46 	out	(BC),A
                             B       47 
                             B       48 
000004AC 3E C9               B       49 	ld	A,11001001b
000004AE 01 FC 09            B       50 	ld	BC,CTCCH2
000004B1 ED 79               B       51 	out	(BC),A
                             B       52 
000004B3                     B       53 INIT_CTC3:
                             B       54 
000004B3 3E 14               B       55 	ld	A,0|INTON&COUNTMODE|RISING|TIMECONST ;Set the CTC 3 to decrment when rising signal recived. Ints on. Time const follows
000004B5 01 FC 0D            B       56 	ld	BC,CTCCH3
000004B8 ED 79               B       57 	out	(BC),A
                             B       58 
000004BA 3E 01               B       59 	ld	A,0|00000001b ;Time Count this is the number of Trgs to receive before Int set to 1.
000004BC 01 FC 0D            B       60 	ld	BC,CTCCH3
000004BF ED 79               B       61 	out	(BC),A
                             B       62 
000004C1 C9                  B       63 	ret
                             B       64 
                             B       65 
000004C2                     B       66 CTC0INT:
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   49


ctc.asm

Location Object              Type  Line Source
                             B       67 ;	...	interrupt	routine
000004C2 F3                  B       68 	di
000004C3 F5                  B       69 	push af
000004C4 F1                  B       70 	pop af
000004C5 FB                  B       71 	ei
000004C6 ED 4D               B       72 	RETI
                             B       73 
000004C8                     B       74 CTC1INT:
                             B       75 ;	...	interrupt	routine
000004C8 F3                  B       76 	di
000004C9 F5                  B       77 	push af
000004CA F1                  B       78 	pop af
000004CB FB                  B       79 	ei
000004CC ED 4D               B       80 	RETI
                             B       81 
000004CE                     B       82 CTC2INT:
                             B       83 
000004CE F3                  B       84 	di
000004CF F5                  B       85 	push af
                             B       86 
000004D0 F1                  B       87 	pop af
000004D1 FB                  B       88 	ei
000004D2 ED 4D               B       89 	RETI
                             B       90 
000004D4                     B       91 CTC3INT:
                             B       92 	;Set up to simulate IM 1
000004D4 CD E8 00            B       93 	call IM1INTHANDLER  ;We call and then to a RETI as the RETI caulses inretupt chain reset.
000004D7 F5                  B       94 	push	af
000004D8 E5                  B       95 	push	hl
                             B       96 
000004D9 21 2B 40            B       97 	LD		HL,FRAMES				; FRAMES1
000004DC 7E                  B       98 	LD		a,(HL)
000004DD 20 1A               B       99 	jr 		nz,NOSEND
000004DF 3E 58               B      100 	ld		a,'X'
000004E1 CD 39 1F            B      101 	call	SIOASendChar
                             B      102 
000004E4 2A 00 30            B      103 	ld		hl,(03000h)
000004E7 36 2D               B      104 	ld		(hl),'-'
000004E9 21 00 30            B      105 	ld		hl,03000h
000004EC 34                  B      106 	inc		(hl)
000004ED 3E FF               B      107 	ld		a,0FFh
000004EF A6                  B      108 	and		(hl)
000004F0 20 02               B      109 	jr		nz,WIPE
000004F2 36 02               B      110 	ld		(hl),00002h
000004F4                     B      111 WIPE:
000004F4 2A 00 30            B      112 	ld		hl,(03000h)
000004F7 36 49               B      113 	ld		(hl),'I'
                             B      114 
000004F9                     B      115 NOSEND:
000004F9 E1                  B      116 	pop		hl;
000004FA F1                  B      117 	pop		af
000004FB ED 4D               B      118 	RETI
                             B      119 
                             B      120 
                             B      121 
                             B      122 ;-------------------------------------------------
000004FD                     B      123 delay:  ; routine to add a programmable delay (set by value stored in D)
000004FD C5                  B      124 	push bc
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   50


ctc.asm

Location Object              Type  Line Source
000004FE                     B      125 loop1:
000004FE 06 FF               B      126 	ld b,0ffh
00000500                     B      127 loop2:
00000500 10 FE               B      128 	djnz loop2
00000502 15                  B      129 	dec d
00000503 C2 FE 04            B      130 	jp nz, loop1
00000506 C1                  B      131 	pop bc
00000507 C9                  B      132 	ret
                             B      133 
                             B      134 
                             A        3     INCLUDE "Extended.asm"
                             B        1 
                             B        2 	INCLUDE "iodefs.inc"
                             C        1 ;	CPU  Z80
                             C        2 
                             C        3 	.IFNDEF RAMSTARTLOC
                             C        4 
                             C        5 	.DEFINE ROM
                             C        6 	.SECTION ROM
                             C        7 	
                             C        8 
                             C        9 ;RAMSTARTLOC equ 03C00h
                             C       10 RAMSTARTLOC equ 04000h
                             C       11 
                             C       12 INTTABLEBASE	equ	01E00h
                             C       13 
                             C       14 
                             C       15 KIOBASE	equ	0FCh
                             C       16 
                             C       17 PIOIOBASE	equ	00B
                             C       18 CTCIOBASE	equ	01B
                             C       19 SIOIOBASE	equ	10B
                             C       20 PIAIOBASE	equ	11B
                             C       21 KIOIOBASE	equ	11B
                             C       22 
                             C       23 PIOPORTADATA	equ	00b
                             C       24 PIOPORTACMD		equ	01b
                             C       25 PIOPORTBDATA	equ	00b
                             C       26 PIOPORTBCMD		equ	01b
                             C       27 
                             C       28 CTCCHANNEL0		equ	00b
                             C       29 CTCCHANNEL1		equ	01b
                             C       30 CTCCHANNEL2		equ	10b
                             C       31 CTCCHANNEL3		equ	11b
                             C       32 
                             C       33 SIOPORTADATA	equ	00b
                             C       34 SIOPORTACMD		equ	01b
                             C       35 SIOPORTBDATA	equ	00b
                             C       36 SIOPORTBCMD		equ	01b
                             C       37 
                             C       38 PIAPORTCDATA	equ	00b
                             C       39 PIAPORTCCMD		equ	01b
                             C       40 
                             C       41 KIOCOMMANDA		equ	10b
                             C       42 KIOCOMMANDB		equ	11b
                             C       43 
                             C       44 MAKEPORT	MACRO	Name,Base,Device,Register
                             C       45 Name equ Base|(Device<<8)|(Register<<10)
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   51


iodefs.inc

Location Object              Type  Line Source
                             C       46 	ENDMAC 
                             C       47 
                             C       48 
                             C       49 	MAKEPORT PIOADATA,KIOBASE,PIOIOBASE,PIOPORTADATA
                             C       50 	MAKEPORT PIOACMD,KIOBASE,PIOIOBASE,PIOPORTACMD
                             C       51 	MAKEPORT PIOBDATA,KIOBASE,PIOIOBASE,PIOPORTBDATA
                             C       52 	MAKEPORT PIOBCMD,KIOBASE,PIOIOBASE,PIOPORTBCMD
                             C       53 
                             C       54 	MAKEPORT CTCCH0,KIOBASE,CTCIOBASE,CTCCHANNEL0
                             C       55 	MAKEPORT CTCCH1,KIOBASE,CTCIOBASE,CTCCHANNEL1
                             C       56 	MAKEPORT CTCCH2,KIOBASE,CTCIOBASE,CTCCHANNEL2
                             C       57 	MAKEPORT CTCCH3,KIOBASE,CTCIOBASE,CTCCHANNEL3
                             C       58 
                             C       59 	MAKEPORT SIOADATA,KIOBASE,SIOIOBASE,SIOPORTADATA
                             C       60 	MAKEPORT SIOACMD,KIOBASE,SIOIOBASE,SIOPORTACMD
                             C       61 	MAKEPORT SIOBDATA,KIOBASE,SIOIOBASE,SIOPORTBDATA
                             C       62 	MAKEPORT SIOBCMD,KIOBASE,SIOIOBASE,SIOPORTBCMD
                             C       63 
                             C       64 	MAKEPORT PIOCDATA,KIOBASE,PIAIOBASE,PIAPORTCDATA
                             C       65 	MAKEPORT PIOCCMD,KIOBASE,PIAIOBASE,PIAPORTCCMD
                             C       66 
                             C       67 	MAKEPORT KIOCMDA,KIOBASE,KIOIOBASE,KIOCOMMANDA
                             C       68 	MAKEPORT KIOCMDB,KIOBASE,KIOIOBASE,KIOCOMMANDB
                             C       69 
                             C       70 	
                             C       71 WDTMT	equ	0F0h
                             C       72 WDTCR	equ	0F1h
                             C       73 
                             C       74 IPR		equ	0F4h
                             C       75 
                             C       76 SCRP	equ	0EEh
                             C       77 SCDP	equ	0EFh
                             C       78 
                             C       79 SERIALTXBUFFLEN	equ	020h	;must be power of 2
                             C       80 
                             C       81 DEFB MACRO P1
                             C       82 	DB P1
                             C       83 	ENDMAC
                             C       84 
                             C       85 DEFW MACRO P1
                             C       86 	DW P1
                             C       87 	ENDMAC
                             C       88 
                             C       89 DEFM MACRO P1
                             C       90 	DB P1
                             C       91 	ENDMAC
                             C       92 
                             C       93 
                             C       94 	.endif
                             B        3 	
                             B        4 	.ifndef CTC0INT
                             B        5 	GLOBAL NEWROMSTART
                             B        6 
                             B        7 ;	EXTERN CTC0INT,CTC1INT,CTC2INT,CTC3INT,INIT_CTC
                             B        8 ;	EXTERN INIT_SIO
                             B        9 ;	EXTERN SIOAINT_TBE,SIOAINT_ESC,SIOAINT_RCA,SIOAINT_SRC,SIOBINT_TBE,SIOBINT_ESC,SIOBINT_RCA,SIOBINT_SRC
                             B       10 
                             B       11 ;	EXTERN PIOAINT,PIOBINT,PIACINT,INIT_PIO
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   52


Extended.asm

Location Object              Type  Line Source
                             B       12 	
                             B       13 ;	EXTERN INTTBL
                             B       14 
                             B       15 ;	EXTERN L009B
                             B       16 
                             B       17 
                             B       18 ;	.DEFINE DEUCEROM
                             B       19 ;	.SECTION DEUCEROM
                             B       20 
                             B       21 	.endif 
                             B       22 
00000508                     B       23 NEWROMSTART:
                             B       24 
                             B       25 
00000508 21 00 20            B       26 	LD		hl,02000h
0000050B 3E 55               B       27 	LD		a,055h
0000050D                     B       28 Looper:
0000050D 4E                  B       29 	LD		C,(hl)
0000050E 0C                  B       30 	INC		C
0000050F 71                  B       31 	LD		(HL),C
00000510 D3 FF               B       32 	OUT		(0FFh),a
00000512 C3 0D 05            B       33 	JP Looper
                             B       34 
00000515 CD 18 05            B       35 	call INIT_KIO
                             B       36 ;	JP	L009B
                             B       37 
                             B       38 
00000518                     B       39 INIT_KIO:
00000518 3A 83 00            B       40 	ld	A,(1<<7)|011B	; SIOPIA Moude = SIP & Daischain = CTC,SIO,PIO 
0000051B 01 FC 0B            B       41 	ld	BC,KIOCMDA
0000051E ED 79               B       42 	out	(BC),A
                             B       43 
00000520 CD 97 04            B       44 	call INIT_CTC
00000523 CD 1A 1E            B       45 	call INIT_PIO
00000526 CD 49 1E            B       46 	call INIT_SIO
                             B       47 
00000529 ED 5E               B       48 	IM	2
0000052B 3E 1E               B       49 	LD	A,INTTABLEBASE/256
0000052D ED 47               B       50 	LD	I, A
0000052F FB                  B       51 	EI
                             B       52 
                             B       53 
                             A        4     INCLUDE "IntTable.asm"
                             B        1 	INCLUDE "iodefs.inc"
                             C        1 ;	CPU  Z80
                             C        2 
                             C        3 	.IFNDEF RAMSTARTLOC
                             C        4 
                             C        5 	.DEFINE ROM
                             C        6 	.SECTION ROM
                             C        7 	
                             C        8 
                             C        9 ;RAMSTARTLOC equ 03C00h
                             C       10 RAMSTARTLOC equ 04000h
                             C       11 
                             C       12 INTTABLEBASE	equ	01E00h
                             C       13 
                             C       14 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   53


iodefs.inc

Location Object              Type  Line Source
                             C       15 KIOBASE	equ	0FCh
                             C       16 
                             C       17 PIOIOBASE	equ	00B
                             C       18 CTCIOBASE	equ	01B
                             C       19 SIOIOBASE	equ	10B
                             C       20 PIAIOBASE	equ	11B
                             C       21 KIOIOBASE	equ	11B
                             C       22 
                             C       23 PIOPORTADATA	equ	00b
                             C       24 PIOPORTACMD		equ	01b
                             C       25 PIOPORTBDATA	equ	00b
                             C       26 PIOPORTBCMD		equ	01b
                             C       27 
                             C       28 CTCCHANNEL0		equ	00b
                             C       29 CTCCHANNEL1		equ	01b
                             C       30 CTCCHANNEL2		equ	10b
                             C       31 CTCCHANNEL3		equ	11b
                             C       32 
                             C       33 SIOPORTADATA	equ	00b
                             C       34 SIOPORTACMD		equ	01b
                             C       35 SIOPORTBDATA	equ	00b
                             C       36 SIOPORTBCMD		equ	01b
                             C       37 
                             C       38 PIAPORTCDATA	equ	00b
                             C       39 PIAPORTCCMD		equ	01b
                             C       40 
                             C       41 KIOCOMMANDA		equ	10b
                             C       42 KIOCOMMANDB		equ	11b
                             C       43 
                             C       44 MAKEPORT	MACRO	Name,Base,Device,Register
                             C       45 Name equ Base|(Device<<8)|(Register<<10)
                             C       46 	ENDMAC 
                             C       47 
                             C       48 
                             C       49 	MAKEPORT PIOADATA,KIOBASE,PIOIOBASE,PIOPORTADATA
                             C       50 	MAKEPORT PIOACMD,KIOBASE,PIOIOBASE,PIOPORTACMD
                             C       51 	MAKEPORT PIOBDATA,KIOBASE,PIOIOBASE,PIOPORTBDATA
                             C       52 	MAKEPORT PIOBCMD,KIOBASE,PIOIOBASE,PIOPORTBCMD
                             C       53 
                             C       54 	MAKEPORT CTCCH0,KIOBASE,CTCIOBASE,CTCCHANNEL0
                             C       55 	MAKEPORT CTCCH1,KIOBASE,CTCIOBASE,CTCCHANNEL1
                             C       56 	MAKEPORT CTCCH2,KIOBASE,CTCIOBASE,CTCCHANNEL2
                             C       57 	MAKEPORT CTCCH3,KIOBASE,CTCIOBASE,CTCCHANNEL3
                             C       58 
                             C       59 	MAKEPORT SIOADATA,KIOBASE,SIOIOBASE,SIOPORTADATA
                             C       60 	MAKEPORT SIOACMD,KIOBASE,SIOIOBASE,SIOPORTACMD
                             C       61 	MAKEPORT SIOBDATA,KIOBASE,SIOIOBASE,SIOPORTBDATA
                             C       62 	MAKEPORT SIOBCMD,KIOBASE,SIOIOBASE,SIOPORTBCMD
                             C       63 
                             C       64 	MAKEPORT PIOCDATA,KIOBASE,PIAIOBASE,PIAPORTCDATA
                             C       65 	MAKEPORT PIOCCMD,KIOBASE,PIAIOBASE,PIAPORTCCMD
                             C       66 
                             C       67 	MAKEPORT KIOCMDA,KIOBASE,KIOIOBASE,KIOCOMMANDA
                             C       68 	MAKEPORT KIOCMDB,KIOBASE,KIOIOBASE,KIOCOMMANDB
                             C       69 
                             C       70 	
                             C       71 WDTMT	equ	0F0h
                             C       72 WDTCR	equ	0F1h
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   54


iodefs.inc

Location Object              Type  Line Source
                             C       73 
                             C       74 IPR		equ	0F4h
                             C       75 
                             C       76 SCRP	equ	0EEh
                             C       77 SCDP	equ	0EFh
                             C       78 
                             C       79 SERIALTXBUFFLEN	equ	020h	;must be power of 2
                             C       80 
                             C       81 DEFB MACRO P1
                             C       82 	DB P1
                             C       83 	ENDMAC
                             C       84 
                             C       85 DEFW MACRO P1
                             C       86 	DW P1
                             C       87 	ENDMAC
                             C       88 
                             C       89 DEFM MACRO P1
                             C       90 	DB P1
                             C       91 	ENDMAC
                             C       92 
                             C       93 
                             C       94 	.endif
                             B        2 
                             B        3 	PUBLIC SIOINTTBL,PIOINTCTC,INTTBL
                             B        4 
                             B        5 ;	.EXTERN CTC0INT,CTC1INT,CTC2INT,CTC3INT,INIT_CTC
                             B        6 ;	.EXTERN INIT_SIO
                             B        7 ;	.EXTERN SIOAINT_TBE,SIOAINT_ESC,SIOAINT_RCA,SIOAINT_SRC,SIOBINT_TBE,SIOBINT_ESC,SIOBINT_RCA,SIOBINT_SRC
                             B        8 
                             B        9 ;	.EXTERN PIOAINT,PIOBINT,PIACINT,INIT_PIO
                             B       10 
                             B       11 ;	.DEFINE INTTABLE
                             B       12 ;	.SECTION INTTABLE
                             B       13 
                             B       14 	org	INTTABLEBASE
                             B       15 
00001E00                     B       16 INTTBL:
                             B       17 ;PIOINTTBL:
00001E00 37 1E               B       18 	DW  PIOAINT ;int 0
                             B       19 
                             B       20 ;	org	01000H
00001E02                     B       21 PIOINTCTC:
00001E02 C2 04               B       22 	DW  CTC0INT
00001E04 C8 04               B       23 	DW  CTC1INT
00001E06 CE 04               B       24 	DW  CTC2INT
00001E08 D4 04               B       25 	DW  CTC3INT
                             B       26 
                             B       27 ;	org	01010H
00001E0A                     B       28 SIOINTTBL:
00001E0A B1 1E               B       29 	DW  SIOBINT_TBE
00001E0C B6 1E               B       30 	DW  SIOBINT_ESC
00001E0E BB 1E               B       31 	DW  SIOBINT_RCA
00001E10 C5 1E               B       32 	DW  SIOBINT_SRC
00001E12 98 1E               B       33 	DW  SIOAINT_TBE
00001E14 9F 1E               B       34 	DW  SIOAINT_ESC
00001E16 A4 1E               B       35 	DW  SIOAINT_RCA
00001E18 AC 1E               B       36 	DW  SIOAINT_SRC
                             B       37 	
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   55


IntTable.asm

Location Object              Type  Line Source
                             B       38 
                             A        5     INCLUDE "pio.asm"
                             B        1 	INCLUDE "iodefs.inc"
                             C        1 ;	CPU  Z80
                             C        2 
                             C        3 	.IFNDEF RAMSTARTLOC
                             C        4 
                             C        5 	.DEFINE ROM
                             C        6 	.SECTION ROM
                             C        7 	
                             C        8 
                             C        9 ;RAMSTARTLOC equ 03C00h
                             C       10 RAMSTARTLOC equ 04000h
                             C       11 
                             C       12 INTTABLEBASE	equ	01E00h
                             C       13 
                             C       14 
                             C       15 KIOBASE	equ	0FCh
                             C       16 
                             C       17 PIOIOBASE	equ	00B
                             C       18 CTCIOBASE	equ	01B
                             C       19 SIOIOBASE	equ	10B
                             C       20 PIAIOBASE	equ	11B
                             C       21 KIOIOBASE	equ	11B
                             C       22 
                             C       23 PIOPORTADATA	equ	00b
                             C       24 PIOPORTACMD		equ	01b
                             C       25 PIOPORTBDATA	equ	00b
                             C       26 PIOPORTBCMD		equ	01b
                             C       27 
                             C       28 CTCCHANNEL0		equ	00b
                             C       29 CTCCHANNEL1		equ	01b
                             C       30 CTCCHANNEL2		equ	10b
                             C       31 CTCCHANNEL3		equ	11b
                             C       32 
                             C       33 SIOPORTADATA	equ	00b
                             C       34 SIOPORTACMD		equ	01b
                             C       35 SIOPORTBDATA	equ	00b
                             C       36 SIOPORTBCMD		equ	01b
                             C       37 
                             C       38 PIAPORTCDATA	equ	00b
                             C       39 PIAPORTCCMD		equ	01b
                             C       40 
                             C       41 KIOCOMMANDA		equ	10b
                             C       42 KIOCOMMANDB		equ	11b
                             C       43 
                             C       44 MAKEPORT	MACRO	Name,Base,Device,Register
                             C       45 Name equ Base|(Device<<8)|(Register<<10)
                             C       46 	ENDMAC 
                             C       47 
                             C       48 
                             C       49 	MAKEPORT PIOADATA,KIOBASE,PIOIOBASE,PIOPORTADATA
                             C       50 	MAKEPORT PIOACMD,KIOBASE,PIOIOBASE,PIOPORTACMD
                             C       51 	MAKEPORT PIOBDATA,KIOBASE,PIOIOBASE,PIOPORTBDATA
                             C       52 	MAKEPORT PIOBCMD,KIOBASE,PIOIOBASE,PIOPORTBCMD
                             C       53 
                             C       54 	MAKEPORT CTCCH0,KIOBASE,CTCIOBASE,CTCCHANNEL0
                             C       55 	MAKEPORT CTCCH1,KIOBASE,CTCIOBASE,CTCCHANNEL1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   56


iodefs.inc

Location Object              Type  Line Source
                             C       56 	MAKEPORT CTCCH2,KIOBASE,CTCIOBASE,CTCCHANNEL2
                             C       57 	MAKEPORT CTCCH3,KIOBASE,CTCIOBASE,CTCCHANNEL3
                             C       58 
                             C       59 	MAKEPORT SIOADATA,KIOBASE,SIOIOBASE,SIOPORTADATA
                             C       60 	MAKEPORT SIOACMD,KIOBASE,SIOIOBASE,SIOPORTACMD
                             C       61 	MAKEPORT SIOBDATA,KIOBASE,SIOIOBASE,SIOPORTBDATA
                             C       62 	MAKEPORT SIOBCMD,KIOBASE,SIOIOBASE,SIOPORTBCMD
                             C       63 
                             C       64 	MAKEPORT PIOCDATA,KIOBASE,PIAIOBASE,PIAPORTCDATA
                             C       65 	MAKEPORT PIOCCMD,KIOBASE,PIAIOBASE,PIAPORTCCMD
                             C       66 
                             C       67 	MAKEPORT KIOCMDA,KIOBASE,KIOIOBASE,KIOCOMMANDA
                             C       68 	MAKEPORT KIOCMDB,KIOBASE,KIOIOBASE,KIOCOMMANDB
                             C       69 
                             C       70 	
                             C       71 WDTMT	equ	0F0h
                             C       72 WDTCR	equ	0F1h
                             C       73 
                             C       74 IPR		equ	0F4h
                             C       75 
                             C       76 SCRP	equ	0EEh
                             C       77 SCDP	equ	0EFh
                             C       78 
                             C       79 SERIALTXBUFFLEN	equ	020h	;must be power of 2
                             C       80 
                             C       81 DEFB MACRO P1
                             C       82 	DB P1
                             C       83 	ENDMAC
                             C       84 
                             C       85 DEFW MACRO P1
                             C       86 	DW P1
                             C       87 	ENDMAC
                             C       88 
                             C       89 DEFM MACRO P1
                             C       90 	DB P1
                             C       91 	ENDMAC
                             C       92 
                             C       93 
                             C       94 	.endif
                             B        2 
                             B        3 ;	.DEFINE DEUCEROM
                             B        4 ;	.SECTION DEUCEROM
                             B        5 
                             B        6 	PUBLIC PIOAINT,PIOBINT,PIACINT,INIT_PIO
                             B        7 
00001E1A                     B        8 INIT_PIO:
00001E1A 3E 00               B        9 	ld	A,0  | (0<<1) ;use int 0
00001E1C 01 FC 04            B       10 	ld	BC,PIOACMD
00001E1F ED 79               B       11 	out	(BC),A
00001E21 3E 0F               B       12 	ld A,1111b  | (0<<6) ;Mode 0
00001E23 01 FC 04            B       13 	ld	BC,PIOACMD
00001E26 ED 79               B       14 	out	(BC),A
                             B       15 
00001E28 3E 02               B       16 	ld	A,0  | (1<<1)
00001E2A 01 FC 04            B       17 	ld	BC,PIOBCMD
00001E2D ED 79               B       18 	out	(BC),A
00001E2F 3E 0F               B       19 	ld	A,1111b  | (0<<6) ;Mode 0
00001E31 01 FC 04            B       20 	ld	BC,PIOBCMD
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   57


pio.asm

Location Object              Type  Line Source
00001E34 ED 79               B       21 	out	(BC),A
                             B       22 
00001E36 C9                  B       23 	ret
                             B       24 
                             B       25 
00001E37                     B       26 PIOAINT:
                             B       27 ;	...	interrupt	routine
00001E37 F3                  B       28 	di
00001E38 F5                  B       29 	push	af
00001E39 F1                  B       30 	pop	af
00001E3A FB                  B       31 	ei
00001E3B ED 4D               B       32 	RETI
                             B       33 
00001E3D                     B       34 PIOBINT:
                             B       35 ;	...	interrupt	routine
00001E3D F3                  B       36 	di
00001E3E F5                  B       37 	push	af
00001E3F F1                  B       38 	pop	af
00001E40 FB                  B       39 	ei
00001E41 ED 4D               B       40 	RETI
                             B       41 
00001E43                     B       42 PIACINT:
                             B       43 ;	...	interrupt	routine
00001E43 F3                  B       44 	di
00001E44 F5                  B       45 	push af
00001E45 F1                  B       46 	pop af
00001E46 FB                  B       47 	ei
00001E47 ED 4D               B       48 	RETI	
                             B       49 
                             B       50 
                             A        6     INCLUDE "sio.asm"
                             B        1 	INCLUDE "iodefs.inc"
                             C        1 ;	CPU  Z80
                             C        2 
                             C        3 	.IFNDEF RAMSTARTLOC
                             C        4 
                             C        5 	.DEFINE ROM
                             C        6 	.SECTION ROM
                             C        7 	
                             C        8 
                             C        9 ;RAMSTARTLOC equ 03C00h
                             C       10 RAMSTARTLOC equ 04000h
                             C       11 
                             C       12 INTTABLEBASE	equ	01E00h
                             C       13 
                             C       14 
                             C       15 KIOBASE	equ	0FCh
                             C       16 
                             C       17 PIOIOBASE	equ	00B
                             C       18 CTCIOBASE	equ	01B
                             C       19 SIOIOBASE	equ	10B
                             C       20 PIAIOBASE	equ	11B
                             C       21 KIOIOBASE	equ	11B
                             C       22 
                             C       23 PIOPORTADATA	equ	00b
                             C       24 PIOPORTACMD		equ	01b
                             C       25 PIOPORTBDATA	equ	00b
                             C       26 PIOPORTBCMD		equ	01b
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   58


iodefs.inc

Location Object              Type  Line Source
                             C       27 
                             C       28 CTCCHANNEL0		equ	00b
                             C       29 CTCCHANNEL1		equ	01b
                             C       30 CTCCHANNEL2		equ	10b
                             C       31 CTCCHANNEL3		equ	11b
                             C       32 
                             C       33 SIOPORTADATA	equ	00b
                             C       34 SIOPORTACMD		equ	01b
                             C       35 SIOPORTBDATA	equ	00b
                             C       36 SIOPORTBCMD		equ	01b
                             C       37 
                             C       38 PIAPORTCDATA	equ	00b
                             C       39 PIAPORTCCMD		equ	01b
                             C       40 
                             C       41 KIOCOMMANDA		equ	10b
                             C       42 KIOCOMMANDB		equ	11b
                             C       43 
                             C       44 MAKEPORT	MACRO	Name,Base,Device,Register
                             C       45 Name equ Base|(Device<<8)|(Register<<10)
                             C       46 	ENDMAC 
                             C       47 
                             C       48 
                             C       49 	MAKEPORT PIOADATA,KIOBASE,PIOIOBASE,PIOPORTADATA
                             C       50 	MAKEPORT PIOACMD,KIOBASE,PIOIOBASE,PIOPORTACMD
                             C       51 	MAKEPORT PIOBDATA,KIOBASE,PIOIOBASE,PIOPORTBDATA
                             C       52 	MAKEPORT PIOBCMD,KIOBASE,PIOIOBASE,PIOPORTBCMD
                             C       53 
                             C       54 	MAKEPORT CTCCH0,KIOBASE,CTCIOBASE,CTCCHANNEL0
                             C       55 	MAKEPORT CTCCH1,KIOBASE,CTCIOBASE,CTCCHANNEL1
                             C       56 	MAKEPORT CTCCH2,KIOBASE,CTCIOBASE,CTCCHANNEL2
                             C       57 	MAKEPORT CTCCH3,KIOBASE,CTCIOBASE,CTCCHANNEL3
                             C       58 
                             C       59 	MAKEPORT SIOADATA,KIOBASE,SIOIOBASE,SIOPORTADATA
                             C       60 	MAKEPORT SIOACMD,KIOBASE,SIOIOBASE,SIOPORTACMD
                             C       61 	MAKEPORT SIOBDATA,KIOBASE,SIOIOBASE,SIOPORTBDATA
                             C       62 	MAKEPORT SIOBCMD,KIOBASE,SIOIOBASE,SIOPORTBCMD
                             C       63 
                             C       64 	MAKEPORT PIOCDATA,KIOBASE,PIAIOBASE,PIAPORTCDATA
                             C       65 	MAKEPORT PIOCCMD,KIOBASE,PIAIOBASE,PIAPORTCCMD
                             C       66 
                             C       67 	MAKEPORT KIOCMDA,KIOBASE,KIOIOBASE,KIOCOMMANDA
                             C       68 	MAKEPORT KIOCMDB,KIOBASE,KIOIOBASE,KIOCOMMANDB
                             C       69 
                             C       70 	
                             C       71 WDTMT	equ	0F0h
                             C       72 WDTCR	equ	0F1h
                             C       73 
                             C       74 IPR		equ	0F4h
                             C       75 
                             C       76 SCRP	equ	0EEh
                             C       77 SCDP	equ	0EFh
                             C       78 
                             C       79 SERIALTXBUFFLEN	equ	020h	;must be power of 2
                             C       80 
                             C       81 DEFB MACRO P1
                             C       82 	DB P1
                             C       83 	ENDMAC
                             C       84 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   59


iodefs.inc

Location Object              Type  Line Source
                             C       85 DEFW MACRO P1
                             C       86 	DW P1
                             C       87 	ENDMAC
                             C       88 
                             C       89 DEFM MACRO P1
                             C       90 	DB P1
                             C       91 	ENDMAC
                             C       92 
                             C       93 
                             C       94 	.endif
                             B        2 
                             B        3 	.ifndef SIOINTTBL
                             B        4 
                             B        5 ;	.DEFINE DEUCEROM
                             B        6 ;	.SECTION DEUCEROM
                             B        7 
                             B        8 ;--------------------------
                             B        9 	PUBLIC INIT_SIO, SIOASendChar
                             B       10 	PUBLIC SIOAINT_TBE,SIOAINT_ESC,SIOAINT_RCA,SIOAINT_SRC,SIOBINT_TBE,SIOBINT_ESC,SIOBINT_RCA,SIOBINT_SRC
                             B       11 
                             B       12 ;	EXTERN SIOINTTBL
                             B       13 ;	EXTERN SIOATXQ, SIOANEXTIN, SIOANEXTOUT,SIOATXBUFF
                             B       14 
                             B       15 	.endif
                             B       16 
                             B       17 
00001E49                     B       18 INIT_SIO:
00001E49 3E 00               B       19 	ld	a,0
00001E4B 32 40 40            B       20 	ld (SIOANEXTIN),a
00001E4E 32 41 40            B       21 	ld (SIOANEXTOUT),a
00001E51 C9                  B       22 	ret
                             B       23 
                             B       24 ;-------------------------------------------------------------------------------
00001E52                     B       25 setSIO:
                             B       26 ;program the SIO
                             B       27 	;set up TX and RX:
                             B       28 	; the followings are settings for channel A
00001E52 3E 30               B       29 	ld a,00110000b	; write into WR0: error reset, select WR0
00001E54 01 FC 06            B       30 	ld BC,SIOACMD
00001E57 ED 79               B       31 	out (BC),A
00001E59 3E 18               B       32 	ld a,00011000b	; write into WR0: channel reset
00001E5B ED 79               B       33 	out (BC),A
                             B       34 
00001E5D 3E 04               B       35 	ld a,00000100b	; write into WR0: select WR4
00001E5F ED 79               B       36 	out (BC),A
00001E61 3E 44               B       37 	ld a,01000100b	; write into WR4: presc. 16x, 1 stop bit, no parity ; IF Crsta; 1.8432 MHZ this is 115200 baud
00001E63 ED 79               B       38 	out (BC),A
                             B       39 
00001E65 3E 05               B       40 	ld a,00000101b	; write into WR0: select WR5
00001E67 ED 79               B       41 	out (BC),A
00001E69 3E E8               B       42 	ld a,11101000b	; write into WR5: DTR on, TX 8 bits, BREAK off, TX on, RTS off
00001E6B ED 79               B       43 	out (BC),A
                             B       44 
                             B       45 	; the following are settings for channel B
00001E6D 3E 01               B       46 	ld a,00000001b	; write into WR0: select WR1
00001E6F 01 FC 06            B       47 	ld BC,SIOBCMD
00001E72 ED 79               B       48 	out (BC),A
00001E74 3E 04               B       49 	ld a,00000100b	; write into WR0: status affects interrupt vectors
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   60


sio.asm

Location Object              Type  Line Source
00001E76 ED 79               B       50 	out (BC),A
                             B       51 
00001E78 3E 02               B       52 	ld a,00000010b	; write into WR0: select WR2
00001E7A ED 79               B       53 	out (BC),A
                             B       54 ;	ld a,SIOINTTBL	; write into WR2: set interrupt vector, but bits D3/D2/D1 of this vector
                             B       55 	; will be affected by the channel & condition that raised the interrupt
                             B       56 	; (see datasheet): in our example, 00Ch for Ch.A receiving a char, 0x0E
                             B       57 	; for special conditions
00001E7C ED 79               B       58 	out (BC),A
                             B       59 
                             B       60 	; the following are settings for channel A
00001E7E 3E 01               B       61 	ld a,01h	; write into WR0: select WR1
00001E80 01 FC 06            B       62 	ld BC,SIOACMD
00001E83 ED 79               B       63 	out (BC),A
00001E85 3E 18               B       64 	ld a,00011000b	; interrupts on every RX char; parity is no special condition;
                             B       65 	; buffer overrun is special condition
00001E87 ED 79               B       66 	out (BC),A
                             B       67 
                             B       68 	;enable SIO channel A RX
00001E89 3E 03               B       69 	ld a,00000011b	; write into WR0: select WR3
00001E8B 01 FC 06            B       70 	ld BC,SIOACMD
00001E8E ED 79               B       71 	out (BC),A
00001E90 3E C1               B       72 	ld a,11000001b	; 8 bits/RX char; auto enable OFF; RX enable
00001E92 01 FC 06            B       73 	ld BC,SIOACMD
00001E95 ED 79               B       74 	out (BC),A
00001E97 C9                  B       75 	ret
                             B       76 
                             B       77 ;Port A Int handlers
                             B       78 
00001E98                     B       79 SIOAINT_TBE:
00001E98 F3                  B       80 	di
00001E99 CD 03 1F            B       81 	call SIOA_TBE
00001E9C FB                  B       82 	ei
00001E9D ED 4D               B       83 	reti
                             B       84 
00001E9F                     B       85 SIOAINT_ESC:
00001E9F F5                  B       86 	push af	; backup AF
                             B       87 
                             B       88 ;External status
                             B       89 
00001EA0 F1                  B       90 	pop af
00001EA1 FB                  B       91 	ei
00001EA2 ED 4D               B       92 	reti
                             B       93 
00001EA4                     B       94 SIOAINT_RCA:
00001EA4 F5                  B       95 	push af	; backup AF
                             B       96 
00001EA5 CD F7 1E            B       97 	call A_SEND_CHAR
                             B       98 
00001EA8 F1                  B       99 	pop af
00001EA9 FB                  B      100 	ei
00001EAA ED 4D               B      101 	reti
                             B      102 
00001EAC                     B      103 SIOAINT_SRC:
00001EAC F5                  B      104 	push af	; backup AF
                             B      105 
                             B      106 ;Special Receive Condition
                             B      107 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   61


sio.asm

Location Object              Type  Line Source
00001EAD F1                  B      108 	pop af
00001EAE FB                  B      109 	ei
00001EAF ED 4D               B      110 	reti
                             B      111 
                             B      112 ;Port B int handlers
                             B      113 
00001EB1                     B      114 SIOBINT_TBE:
00001EB1 F5                  B      115 	push af	; backup AF
                             B      116 
                             B      117 ;Transmitt buffer empty
                             B      118 
00001EB2 F1                  B      119 	pop af
00001EB3 FB                  B      120 	ei
00001EB4 ED 4D               B      121 	reti
                             B      122 
00001EB6                     B      123 SIOBINT_ESC:
00001EB6 F5                  B      124 	push af	; backup AF
                             B      125 
                             B      126 ;External status
                             B      127 
00001EB7 F1                  B      128 	pop af
00001EB8 FB                  B      129 	ei
00001EB9 ED 4D               B      130 	reti
                             B      131 
00001EBB                     B      132 SIOBINT_RCA:
00001EBB F5                  B      133 	push af	; backup AF
                             B      134 
00001EBC 01 FC 02            B      135 	ld BC,SIOBDATA
00001EBF ED 79               B      136 	out (BC),A	; echo char to transmitter
                             B      137 
00001EC1 F1                  B      138 	pop af
00001EC2 FB                  B      139 	ei
00001EC3 ED 4D               B      140 	reti
                             B      141 
00001EC5                     B      142 SIOBINT_SRC:
00001EC5 F5                  B      143 	push af	; backup AF
                             B      144 
                             B      145 ;Special Receive Condition
                             B      146 
00001EC6 F1                  B      147 	pop af
00001EC7 FB                  B      148 	ei
00001EC8 ED 4D               B      149 	reti
                             B      150 
                             B      151 
                             B      152 	;-------------------------------------------------------------------------------
                             B      153 ; serial management
                             B      154 
00001ECA                     B      155 A_RTS_OFF:
00001ECA 3E 05               B      156 	ld a,00000101b	; write into WR0: select WR5
00001ECC 01 FC 06            B      157 	ld BC,SIOACMD
00001ECF ED 79               B      158 	out (BC),A
00001ED1 3E E8               B      159 	ld a,11101000b	; 8 bits/TX char; TX enable; RTS disable
00001ED3 01 FC 06            B      160 	ld BC,SIOACMD
00001ED6 ED 79               B      161 	out (BC),A
00001ED8 C9                  B      162 	ret
                             B      163 
00001ED9                     B      164 A_RTS_ON:
00001ED9 3E 05               B      165 	ld a,00000101b	; write into WR0: select WR5
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   62


sio.asm

Location Object              Type  Line Source
00001EDB 01 FC 06            B      166 	ld BC,SIOACMD
00001EDE ED 79               B      167 	out (BC),A
00001EE0 3E EA               B      168 	ld a,11101010b	; 8 bits/TX char; TX enable; RTS enable
00001EE2 01 FC 06            B      169 	ld BC,SIOACMD
00001EE5 ED 79               B      170 	out (BC),A
00001EE7 C9                  B      171 	ret
                             B      172 
00001EE8                     B      173 SIO_A_DI:
                             B      174 	;disable SIO channel A RX
00001EE8 3E 03               B      175 	ld a,00000011b	; write into WR0: select WR3
00001EEA 01 FC 06            B      176 	ld BC,SIOACMD
00001EED ED 79               B      177 	out (BC),A
00001EEF 3E 0C               B      178 	ld a,00001100b	; write into WR3: RX disable;
00001EF1 01 FC 06            B      179 	ld BC,SIOACMD
00001EF4 ED 79               B      180 	out (BC),A
00001EF6 C9                  B      181 	ret
                             B      182 
00001EF7                     B      183 A_SEND_CHAR:
00001EF7 CD CA 1E            B      184 	call A_RTS_OFF
                             B      185 
00001EFA 01 FC 02            B      186 	ld BC,SIOADATA
00001EFD ED 79               B      187 	out (BC),A	; echo char to transmitter
                             B      188 
00001EFF CD D9 1E            B      189 	call A_RTS_ON
00001F02 C9                  B      190 	ret
                             B      191 
                             B      192 
                             B      193 	
                             B      194 
                             B      195 
00001F03                     B      196 SIOA_TBE:
00001F03 F5                  B      197 	push af	; backup AF
00001F04 C5                  B      198 	push bc	; backup AF
00001F05 D5                  B      199 	push de	; backup AF
00001F06 E5                  B      200 	push hl	; backup AF
00001F07 FD E5               B      201 	push iy	; backup AF
                             B      202 
                             B      203 ;test.c:16: if (NextIn != NextOut)
00001F09 3A 40 40            B      204 	ld	a,(SIOANEXTIN)
00001F0C FD 21 41 40         B      205 	ld	iy,SIOANEXTOUT
00001F10 FD 96 00            B      206 	sub	a,(iy)
00001F13 28 1D               B      207 	jr	Z,SIOAINT_TBE_EXIT
                             B      208 ;test.c:18: UART1_SendData8(UBuffer[NextOut++]);
00001F15 01 42 40            B      209 	ld	bc, SIOATXBUFF
00001F18 FD 5E 00            B      210 	ld	e, (iy)
00001F1B FD 34 00            B      211 	inc	(iy)
00001F1E 6B                  B      212 	ld	l, e
00001F1F 26 00               B      213 	ld	h, 00h
00001F21 09                  B      214 	add	hl, bc
00001F22 7E                  B      215 	ld	a, (hl)
                             B      216 
00001F23 CD F7 1E            B      217 	call A_SEND_CHAR
                             B      218 
                             B      219 ;test.c:19: NextOut &= 0x1F;
00001F26 FD 21 41 40         B      220 	ld	iy, SIOANEXTOUT
00001F2A FD 7E 00            B      221 	ld	a, (iy)
00001F2D E6 1F               B      222 	and	a, 01fh
00001F2F FD 77 00            B      223 	ld	(iy), a
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   63


sio.asm

Location Object              Type  Line Source
                             B      224 
00001F32                     B      225 SIOAINT_TBE_EXIT:
                             B      226 
00001F32 FD E1               B      227 	pop iy	
00001F34 E1                  B      228 	pop hl	
00001F35 D1                  B      229 	pop de	
00001F36 C1                  B      230 	pop bc	
00001F37 F1                  B      231 	pop af
00001F38 C9                  B      232 	ret	
                             B      233 ;	---------------------------------
                             B      234 ; Function UARTSendChar
                             B      235 ; ---------------------------------
00001F39                     B      236 SIOASendChar: ; Char to send is in A
                             B      237 ;test.c:32: UBuffer[NextIn++] = Byte;
00001F39 F5                  B      238 	push af;
00001F3A 3A 40 40            B      239 	ld	a,(SIOANEXTIN)
00001F3D FD 21 41 40         B      240 	ld	iy, SIOANEXTOUT
00001F41 FD 96 00            B      241 	sub	a,(iy+0)
00001F44 28 05               B      242 	jr	Z,ISEMPTY
                             B      243 
00001F46 16 00               B      244 	ld d,0
00001F48 C3 4D 1F            B      245 	jp FLAGSET
00001F4B                     B      246 ISEMPTY:
00001F4B 16 01               B      247 	ld d,1
                             B      248 
00001F4D                     B      249 FLAGSET:
00001F4D FD 21 40 40         B      250 	ld	iy, SIOANEXTIN
00001F51 FD 4E 00            B      251 	ld	c, (iy)
00001F54 FD 34 00            B      252 	inc	(iy)
00001F57 21 42 40            B      253 	ld	hl, SIOATXBUFF
00001F5A 06 00               B      254 	ld	b, 00h
00001F5C 09                  B      255 	add	hl, bc
                             B      256 
00001F5D F1                  B      257 	pop af
00001F5E 77                  B      258 	ld	(hl), a
                             B      259 ;test.c:33: NextIn &= 0x01F;
00001F5F FD 21 40 40         B      260 	ld	iy, SIOANEXTIN
00001F63 FD 7E 00            B      261 	ld	a, (iy)
00001F66 E6 1F               B      262 	and	a, SERIALTXBUFFLEN-1
00001F68 FD 77 00            B      263 	ld	(iy), a
                             B      264 
00001F6B 7A                  B      265 	ld	a,d
00001F6C 20 03               B      266 	jr	NZ,EXITTHIS
                             B      267 
00001F6E CD 98 1E            B      268 	call SIOAINT_TBE
                             B      269 
00001F71                     B      270 EXITTHIS:
00001F71 C9                  B      271 	ret
                             B      272 
                             B      273 
                             A        7     INCLUDE "endend.asm"
                             B        1 	INCLUDE "iodefs.inc"
                             C        1 ;	CPU  Z80
                             C        2 
                             C        3 	.IFNDEF RAMSTARTLOC
                             C        4 
                             C        5 	.DEFINE ROM
                             C        6 	.SECTION ROM
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   64


iodefs.inc

Location Object              Type  Line Source
                             C        7 	
                             C        8 
                             C        9 ;RAMSTARTLOC equ 03C00h
                             C       10 RAMSTARTLOC equ 04000h
                             C       11 
                             C       12 INTTABLEBASE	equ	01E00h
                             C       13 
                             C       14 
                             C       15 KIOBASE	equ	0FCh
                             C       16 
                             C       17 PIOIOBASE	equ	00B
                             C       18 CTCIOBASE	equ	01B
                             C       19 SIOIOBASE	equ	10B
                             C       20 PIAIOBASE	equ	11B
                             C       21 KIOIOBASE	equ	11B
                             C       22 
                             C       23 PIOPORTADATA	equ	00b
                             C       24 PIOPORTACMD		equ	01b
                             C       25 PIOPORTBDATA	equ	00b
                             C       26 PIOPORTBCMD		equ	01b
                             C       27 
                             C       28 CTCCHANNEL0		equ	00b
                             C       29 CTCCHANNEL1		equ	01b
                             C       30 CTCCHANNEL2		equ	10b
                             C       31 CTCCHANNEL3		equ	11b
                             C       32 
                             C       33 SIOPORTADATA	equ	00b
                             C       34 SIOPORTACMD		equ	01b
                             C       35 SIOPORTBDATA	equ	00b
                             C       36 SIOPORTBCMD		equ	01b
                             C       37 
                             C       38 PIAPORTCDATA	equ	00b
                             C       39 PIAPORTCCMD		equ	01b
                             C       40 
                             C       41 KIOCOMMANDA		equ	10b
                             C       42 KIOCOMMANDB		equ	11b
                             C       43 
                             C       44 MAKEPORT	MACRO	Name,Base,Device,Register
                             C       45 Name equ Base|(Device<<8)|(Register<<10)
                             C       46 	ENDMAC 
                             C       47 
                             C       48 
                             C       49 	MAKEPORT PIOADATA,KIOBASE,PIOIOBASE,PIOPORTADATA
                             C       50 	MAKEPORT PIOACMD,KIOBASE,PIOIOBASE,PIOPORTACMD
                             C       51 	MAKEPORT PIOBDATA,KIOBASE,PIOIOBASE,PIOPORTBDATA
                             C       52 	MAKEPORT PIOBCMD,KIOBASE,PIOIOBASE,PIOPORTBCMD
                             C       53 
                             C       54 	MAKEPORT CTCCH0,KIOBASE,CTCIOBASE,CTCCHANNEL0
                             C       55 	MAKEPORT CTCCH1,KIOBASE,CTCIOBASE,CTCCHANNEL1
                             C       56 	MAKEPORT CTCCH2,KIOBASE,CTCIOBASE,CTCCHANNEL2
                             C       57 	MAKEPORT CTCCH3,KIOBASE,CTCIOBASE,CTCCHANNEL3
                             C       58 
                             C       59 	MAKEPORT SIOADATA,KIOBASE,SIOIOBASE,SIOPORTADATA
                             C       60 	MAKEPORT SIOACMD,KIOBASE,SIOIOBASE,SIOPORTACMD
                             C       61 	MAKEPORT SIOBDATA,KIOBASE,SIOIOBASE,SIOPORTBDATA
                             C       62 	MAKEPORT SIOBCMD,KIOBASE,SIOIOBASE,SIOPORTBCMD
                             C       63 
                             C       64 	MAKEPORT PIOCDATA,KIOBASE,PIAIOBASE,PIAPORTCDATA
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   65


iodefs.inc

Location Object              Type  Line Source
                             C       65 	MAKEPORT PIOCCMD,KIOBASE,PIAIOBASE,PIAPORTCCMD
                             C       66 
                             C       67 	MAKEPORT KIOCMDA,KIOBASE,KIOIOBASE,KIOCOMMANDA
                             C       68 	MAKEPORT KIOCMDB,KIOBASE,KIOIOBASE,KIOCOMMANDB
                             C       69 
                             C       70 	
                             C       71 WDTMT	equ	0F0h
                             C       72 WDTCR	equ	0F1h
                             C       73 
                             C       74 IPR		equ	0F4h
                             C       75 
                             C       76 SCRP	equ	0EEh
                             C       77 SCDP	equ	0EFh
                             C       78 
                             C       79 SERIALTXBUFFLEN	equ	020h	;must be power of 2
                             C       80 
                             C       81 DEFB MACRO P1
                             C       82 	DB P1
                             C       83 	ENDMAC
                             C       84 
                             C       85 DEFW MACRO P1
                             C       86 	DW P1
                             C       87 	ENDMAC
                             C       88 
                             C       89 DEFM MACRO P1
                             C       90 	DB P1
                             C       91 	ENDMAC
                             C       92 
                             C       93 
                             C       94 	.endif
                             B        2 	
                             B        3 ;	.DEFINE ENDROMS
                             B        4 ;	.SECTION ENDROMS
                             B        5 
                             B        6 	org	01fffh
                             B        7 
00001FFF                     B        8 ENDEND:
00001FFF 58                  B        9 	DB	'X'
                             B       10 
                             B       11 ;	ENDSECTION
                             A        8     INCLUDE "GVAriables.asm"
                             B        1 	INCLUDE "iodefs.inc"
                             C        1 ;	CPU  Z80
                             C        2 
                             C        3 	.IFNDEF RAMSTARTLOC
                             C        4 
                             C        5 	.DEFINE ROM
                             C        6 	.SECTION ROM
                             C        7 	
                             C        8 
                             C        9 ;RAMSTARTLOC equ 03C00h
                             C       10 RAMSTARTLOC equ 04000h
                             C       11 
                             C       12 INTTABLEBASE	equ	01E00h
                             C       13 
                             C       14 
                             C       15 KIOBASE	equ	0FCh
                             C       16 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   66


iodefs.inc

Location Object              Type  Line Source
                             C       17 PIOIOBASE	equ	00B
                             C       18 CTCIOBASE	equ	01B
                             C       19 SIOIOBASE	equ	10B
                             C       20 PIAIOBASE	equ	11B
                             C       21 KIOIOBASE	equ	11B
                             C       22 
                             C       23 PIOPORTADATA	equ	00b
                             C       24 PIOPORTACMD		equ	01b
                             C       25 PIOPORTBDATA	equ	00b
                             C       26 PIOPORTBCMD		equ	01b
                             C       27 
                             C       28 CTCCHANNEL0		equ	00b
                             C       29 CTCCHANNEL1		equ	01b
                             C       30 CTCCHANNEL2		equ	10b
                             C       31 CTCCHANNEL3		equ	11b
                             C       32 
                             C       33 SIOPORTADATA	equ	00b
                             C       34 SIOPORTACMD		equ	01b
                             C       35 SIOPORTBDATA	equ	00b
                             C       36 SIOPORTBCMD		equ	01b
                             C       37 
                             C       38 PIAPORTCDATA	equ	00b
                             C       39 PIAPORTCCMD		equ	01b
                             C       40 
                             C       41 KIOCOMMANDA		equ	10b
                             C       42 KIOCOMMANDB		equ	11b
                             C       43 
                             C       44 MAKEPORT	MACRO	Name,Base,Device,Register
                             C       45 Name equ Base|(Device<<8)|(Register<<10)
                             C       46 	ENDMAC 
                             C       47 
                             C       48 
                             C       49 	MAKEPORT PIOADATA,KIOBASE,PIOIOBASE,PIOPORTADATA
                             C       50 	MAKEPORT PIOACMD,KIOBASE,PIOIOBASE,PIOPORTACMD
                             C       51 	MAKEPORT PIOBDATA,KIOBASE,PIOIOBASE,PIOPORTBDATA
                             C       52 	MAKEPORT PIOBCMD,KIOBASE,PIOIOBASE,PIOPORTBCMD
                             C       53 
                             C       54 	MAKEPORT CTCCH0,KIOBASE,CTCIOBASE,CTCCHANNEL0
                             C       55 	MAKEPORT CTCCH1,KIOBASE,CTCIOBASE,CTCCHANNEL1
                             C       56 	MAKEPORT CTCCH2,KIOBASE,CTCIOBASE,CTCCHANNEL2
                             C       57 	MAKEPORT CTCCH3,KIOBASE,CTCIOBASE,CTCCHANNEL3
                             C       58 
                             C       59 	MAKEPORT SIOADATA,KIOBASE,SIOIOBASE,SIOPORTADATA
                             C       60 	MAKEPORT SIOACMD,KIOBASE,SIOIOBASE,SIOPORTACMD
                             C       61 	MAKEPORT SIOBDATA,KIOBASE,SIOIOBASE,SIOPORTBDATA
                             C       62 	MAKEPORT SIOBCMD,KIOBASE,SIOIOBASE,SIOPORTBCMD
                             C       63 
                             C       64 	MAKEPORT PIOCDATA,KIOBASE,PIAIOBASE,PIAPORTCDATA
                             C       65 	MAKEPORT PIOCCMD,KIOBASE,PIAIOBASE,PIAPORTCCMD
                             C       66 
                             C       67 	MAKEPORT KIOCMDA,KIOBASE,KIOIOBASE,KIOCOMMANDA
                             C       68 	MAKEPORT KIOCMDB,KIOBASE,KIOIOBASE,KIOCOMMANDB
                             C       69 
                             C       70 	
                             C       71 WDTMT	equ	0F0h
                             C       72 WDTCR	equ	0F1h
                             C       73 
                             C       74 IPR		equ	0F4h
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   67


iodefs.inc

Location Object              Type  Line Source
                             C       75 
                             C       76 SCRP	equ	0EEh
                             C       77 SCDP	equ	0EFh
                             C       78 
                             C       79 SERIALTXBUFFLEN	equ	020h	;must be power of 2
                             C       80 
                             C       81 DEFB MACRO P1
                             C       82 	DB P1
                             C       83 	ENDMAC
                             C       84 
                             C       85 DEFW MACRO P1
                             C       86 	DW P1
                             C       87 	ENDMAC
                             C       88 
                             C       89 DEFM MACRO P1
                             C       90 	DB P1
                             C       91 	ENDMAC
                             C       92 
                             C       93 
                             C       94 	.endif
                             B        2 
                             B        3 	org RAMSTARTLOC
                             B        4 
                             B        5 	.ifndef FRAMES
                             B        6 
                             B        7 	PUBLIC	FRAMES
                             B        8 	PUBLIC	RAMSTART
                             B        9 	PUBLIC 	RAMTOP
                             B       10 	PUBLIC 	L_HALF
                             B       11 	PUBLIC 	FP_WS
                             B       12 	PUBLIC	STATIN
                             B       13 	PUBLIC 	XCOORD
                             B       14 	PUBLIC 	SCRPOS
                             B       15 	
                             B       16 	.endif
                             B       17 
                             B       18 
                             B       19 ; gap for vide ram
                             B       20 ;	.DEFINE ACERAM
                             B       21 	.SECTION .BSS
                             B       22 
                             B       23 	org RAMSTARTLOC
                             B       24 
                             B       25 
00004000                     B       26 RAMSTART:
                             B       27 
                             B       28 ; -----------
                             B       29 ;
                             B       30 ; -----------
                             B       31 ; ----------------------
                             B       32 ; THE 'SYSTEM VARIABLES'
                             B       33 ; ----------------------
                             B       34 ; "Here is a list of system variables. We have given them all names, but that
                             B       35 ; is just for ease of reference. The Ace will not recognize these names,
                             B       36 ; except for a few, like 'BASE', that are FORTH words. I've written these
                             B       37 ; FORTH words in bold type in the usual way."
                             B       38 ;
                             B       39 ;
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   68


GVAriables.asm

Location Object              Type  Line Source
                             B       40 ; FP_WS			RAMSTART+000h (15360)   19 bytes used as work space for floating point
                             B       41 ;								arithmetic.
00004000                     B       42 FP_WS: DS 19
                             B       43 ;
                             B       44 ; LISTWS		RAMSTART+013h (15379)   5 bytes used as workspace by 'LIST' and 'EDIT'.
                             B       45 ;
00004013                     B       46 LISTWS: DS	5
                             B       47 ;
                             B       48 ; RAMTOP		RAMSTART+018h (15384)   2 bytes - the first address past the last
                             B       49 ;								address in RAM.
                             B       50 ;
00004018                     B       51 RAMTOP:	DS	2
                             B       52 ;
                             B       53 ; HLD			RAMSTART+01Ah (15386)   2 bytes. The address of the latest character
                             B       54 ;								held in the pad by formatted output.
                             B       55 ;								('#', 'HOLD' and so on).
0000401A                     B       56 HLD:	DS	2
                             B       57 ;
                             B       58 ; SCRPOS		RAMSTART+01Ch (15388)   2 bytes. The address of the place in video RAM
                             B       59 ;								where the next character is to be printed
                             B       60 ;								(i.e. the 'print position').
0000401C                     B       61 SCRPOS:	DS	2
                             B       62 ;
                             B       63 ; INSCRN		RAMSTART+01Eh (15390)   2 bytes. The address of the start of the
                             B       64 ;								current 'logical line' in the input buffer.
0000401E                     B       65 INSCRN:	DS	2
                             B       66 ;
                             B       67 ; CURSOR		RAMSTART+020h (15392)   2 bytes. The address of the cursor in the
                             B       68 ;								input buffer.
00004020                     B       69 CURSOR:	DS	2
                             B       70 ;
                             B       71 ; ENDSUF		RAMSTART+022h (15394)   2 bytes. The address of the end of the current
                             B       72 ;								logical line in the input buffer.
00004022                     B       73 ENDSUF:	DS	2
                             B       74 ;
                             B       75 ; L_HALF		RAMSTART+024h (15396)   2 bytes. The address of the start of the the
                             B       76 ;								input buffer. The input buffer itself is stored
                             B       77 ;								in the video RAM, where you see it.
00004024                     B       78 L_HALF:	DS	2
                             B       79 ; KEYCOD		RAMSTART+026h (15398)   1 byte. The ASCII code of the last key pressed.
00004026                     B       80 KEYCOD:	DS	1
                             B       81 ;
                             B       82 ; KEYCNT		RAMSTART+027h (15399)   1 byte. Used by the routine that reads the
                             B       83 ;								keyboard.
00004027                     B       84 KEYCNT:	DS	1
                             B       85 ; STATIN		RAMSTART+028h (15400)   1 byte. Used by the routine that reads the
                             B       86 ;								keyboard.
00004028                     B       87 STATIN:	DS	1
                             B       88 ;
                             B       89 ; EXWRCH		RAMSTART+029h (15401)   2 bytes. This is normally 0 but it can be
                             B       90 ;								changed to allow printing to be sent to some
                             B       91 ;								device other than the screen.
00004029                     B       92 EXWRCH:	DS	2
                             B       93 ; FRAMES		RAMSTART+02Bh (15403)   4 bytes. These four bytes form a double length
                             B       94 ;								integer that counts the time since the Ace was
                             B       95 ;								switched on in 50ths of a second.
0000402B                     B       96 FRAMES:	DS	4
                             B       97 ; XCOORD		RAMSTART+02Fh (15407)   1 byte. The x-coordinate last used by 'PLOT'.
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   69


GVAriables.asm

Location Object              Type  Line Source
0000402F                     B       98 XCOORD:	DS	1
                             B       99 ;
                             B      100 ; YCOORD		RAMSTART+030h (15408)   1 byte. The y-coordinate last used by 'PLOT'.
00004030                     B      101 YCOORD:	DS	1
                             B      102 ;
                             B      103 ; CURRENT		RAMSTART+031h (15409)   2 bytes. The parameter field address for the
                             B      104 ;								vocabulary word of the current vocabulary.
00004031                     B      105 CURRENT:	DS	2
                             B      106 ;
                             B      107 ; CONTEXT		RAMSTART+033h (15411)   2 bytes. The parameter field address for the
                             B      108 ;								vocabulary word of the context vocabulary.
00004033                     B      109 CONTEXT:	DS	2
                             B      110 ;
                             B      111 ; VOCLNK		RAMSTART+035h (15413)   2 bytes. The address of the fourth byte in the
                             B      112 ;								parameter field - the vocabulary linkage - of
                             B      113 ;								the vocabulary word of the most recently
                             B      114 ;								defined vocabulary.
00004035                     B      115 VOCLNK:	DS	2
                             B      116 ;
                             B      117 ; STKBOT		RAMSTART+037h (15415)   2 bytes. The address of the next byte into
                             B      118 ;								which anything will be enclosed in the
                             B      119 ;								dictionary, i.e. one byte past the present end
                             B      120 ;								of the dictionary.
                             B      121 ;								'HERE' is equivalent to 15415 @.
00004037                     B      122 STKBOT:	DS	2
                             B      123 
                             B      124 ; DICT			RAMSTART+039h (15417)   2 bytes. The address of the length field in the
                             B      125 ;								newest word in the dictionary. If that length
                             B      126 ;								field is correctly filled in then DICT may
                             B      127 ;								be 0.
00004039                     B      128 DICT:	DS	2
                             B      129 ; SPARE			RAMSTART+03Bh (15419)   2 bytes. The address of the first byte past the
                             B      130 ;								top of the stack.
0000403B                     B      131 SPARE:	DS	2
                             B      132 ;
                             B      133 ; ERR_NO		RAMSTART+03Dh (15421)   1 byte. This is usually 255, meaning "no error".
                             B      134 ;								If 'ABORT' is used, and ERR_NO is between 0 and
                             B      135 ;								127, then "ERROR" will be printed out, followed
                             B      136 ;								by the error number ERR_NO.
0000403D                     B      137 ERR_NO:	DS	1
                             B      138 ;
                             B      139 ; FLAGS			RAMSTART+03Eh (15422)   1 byte. Shows the state of various parts of the
                             B      140 ;								system, each bit showing whether something
                             B      141 ;								particular is happening or not. Some of these
                             B      142 ;								may be useful.
                             B      143 ;
                             B      144 ;								Bit 2, when 1, shows that there is an incomplete
                             B      145 ;								definition at the end of the dictionary.
                             B      146 ;
                             B      147 ;								Bit 3, when 1, shows that output is to fed into
                             B      148 ;								the input buffer.
                             B      149 ;
                             B      150 ;								Bit 4, when 1, shows that the Ace is in
                             B      151 ;								invisible mode.
                             B      152 ;
                             B      153 ;								Bit 6, when 1, shows that the Ace is in compile
                             B      154 ;								mode.
0000403E                     B      155 FLAGS:	DS	1
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   70


GVAriables.asm

Location Object              Type  Line Source
                             B      156 ;
                             B      157 ; BASE			RAMSTART+03Fh (15423)   1 byte. The system number base.
0000403F                     B      158 BASE:	DS	1
                             B      159 
                             B      160 ;;Deuce Vars
                             B      161 	PUBLIC SIOANEXTIN,SIOANEXTOUT,SIOATXBUFF
                             B      162 
00004040                     B      163 	SIOANEXTIN:		DS	1
00004041                     B      164 	SIOANEXTOUT:	DS	1
00004042                     B      165 	SIOATXBUFF:		DS	SERIALTXBUFFLEN
                             A        9 
Zilog Macro Assembler.  Version K2.14    19-Jul-120    18:48:43    Page:   71


c:\users\john bradley\dropbox\ace-2019\newrom\all.s


    0 Warnings
    0 Errors
